const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-PGfHBM1y.js","assets/vendor-Du9Us8jq.js"])))=>i.map(i=>d[i]);
import{r as w,a as ur,L as ps,R as y,o as hr,b as fr,c as K,g as pr,u as mr,d as gr,e as vr,B as yr,f as br,h as zt}from"./vendor-Du9Us8jq.js";import{C as wr,a as _r,L as xr,P as kr,b as jr,B as Cr,T as Sr,p as Er,c as Pr,d as Tr,e as $r,f as Ar}from"./charts-CS-fYcen.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var ms={exports:{}},nt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Or=w,Nr=Symbol.for("react.element"),Rr=Symbol.for("react.fragment"),Ir=Object.prototype.hasOwnProperty,Lr=Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dr={key:!0,ref:!0,__self:!0,__source:!0};function gs(r,e,t){var s,n={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)Ir.call(e,s)&&!Dr.hasOwnProperty(s)&&(n[s]=e[s]);if(r&&r.defaultProps)for(s in e=r.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:Nr,type:r,key:i,ref:a,props:n,_owner:Lr.current}}nt.Fragment=Rr;nt.jsx=gs;nt.jsxs=gs;ms.exports=nt;var u=ms.exports,vs,qt=ur;vs=qt.createRoot,qt.hydrateRoot;const ys=[{id:"fuel-network",name:"Fuel Network",logo:"https://assets.coingecko.com/coins/images/29577/standard/fuel.png?1696528516",date:"2024-12-19",buyPrice:"0.02",unlockPrice:"0.11288",highestPrice:"0.08375",currentPrice:null,roi:null,status:"live",link:"https://crypto-fundraising.info/projects/fuel-network/",about:"Fuel Network is a global, decentralized collective of passionate developers focused on pioneering blockchain scalability. With its innovative technology, Fuel is pushing the boundaries of blockchain performance, enabling faster, more efficient decentralized applications for the next generation of Web3.",links:{website:"https://fuel.network",twitter:"https://x.com/fuel_network"}},{id:"almanak",name:"ALMANAK",logo:"https://pbs.twimg.com/profile_images/1757710046174027776/g6SyLr_q_400x400.jpg",date:"Pending TGE",buyPrice:"--",currentPrice:null,roi:null,status:"pending",link:"https://crypto-fundraising.info/projects/almanak/",about:"Almanak is a Web3 platform revolutionizing DeFi and gaming with AI-driven Financial Agents. It uses agent-based modeling to optimize profitability and security, empowering traders and asset managers to ideate, test, and adapt strategies in real time. Through its intuitive interface and SDK, Almanak makes building, optimizing, and deploying financial strategies seamless and accessible for everyone.",links:{website:"https://almanak.co/",twitter:"https://x.com/Almanak__"}},{id:"pulse",name:"Pulse",logo:"https://pbs.twimg.com/profile_images/1865163275807150080/jov8V4we_400x400.jpg",date:"Pending TGE",buyPrice:"--",currentPrice:null,roi:null,status:"pending",link:"https://crypto-fundraising.info/projects/pulse/",about:"Pulse is an open health network that gives users control over their health data while monetizing it. The platform allows individuals to manage and share personal health information, earning rewards for participation. With exclusive fitness challenges and private communities, Pulse combines data empowerment with gamified experiences to revolutionize personal health management.",links:{website:"https://pulse.site/",twitter:"https://x.com/PulseNoLimits"}},{id:"silencio",name:"Silencio",logo:"https://pbs.twimg.com/profile_images/1829081173676457985/fJ5Rs6dr_400x400.jpg",date:"February 2025",buyPrice:"0.0006",currentPrice:null,roi:null,status:"pending",link:"https://crypto-fundraising.info/projects/silencio/",about:"Silencio is the world's largest citizen science project, tackling noise pollution through a community-powered network. Users contribute hyper-local noise data via a free app, earning rewards and monetizing their data. By creating detailed noise maps, Silencio serves industries like real estate, insurance, and academia while helping to combat noise pollution and enhance global quality of life.",links:{website:"https://www.silencio.network/",twitter:"https://x.com/silencioNetwork"}},{id:"enclave",name:"Enclave",logo:"https://pbs.twimg.com/profile_images/1830688058636726276/GCjCS6ez_400x400.jpg",date:"Pending TGE",buyPrice:"--",currentPrice:null,roi:null,status:"pending",link:"https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExMWZseXZnZnAwcXFpMDcyZ2d1bW1va3pzODN4N3o2anFzYzN4MXVnZCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/20k1punZ5bpmM/giphy.gif",about:"Enclave is a cutting-edge protocol for secure, privacy-preserving computation. By leveraging Encrypted Execution Environments (E3), it enables organizations to process sensitive data—like medical records, financial stats, or even secret ballots—without ever exposing it. Combining advanced cryptography like Fully Homomorphic Encryption (FHE) and Zero-Knowledge Proofs (ZKPs), Enclave empowers industries with unparalleled data privacy, integrity, and verifiable computation. Whether it's safeguarding personal data or enabling new decentralized applications, Enclave is redefining secure data processing for the modern world.",links:{website:"https://www.enclave.gg/",twitter:"https://x.com/EnclaveE3"}},{id:"corn",name:"Corn",logo:"https://pbs.twimg.com/profile_images/1838599679321182208/igqD6b-Q_400x400.jpg",date:"Upcoming ICO",buyPrice:"0.07",currentPrice:null,roi:null,status:"upcoming",link:"https://crypto-fundraising.info/projects/corn/",about:"Corn is an Ethereum layer-2 solution built on Bitcoin, designed to enhance Bitcoin's utility by enabling it to power gas fees in decentralized finance (DeFi) ecosystems. At the heart of Corn is BTCN, a hybrid tokenized Bitcoin backed 1:1 by native BTC. This allows Bitcoin holders to seamlessly use their assets in DeFi without relying on centralized intermediaries. Corn bridges the gap between Ethereum and Bitcoin, unlocking a new frontier of utility for the world's largest cryptocurrency.",links:{website:"https://usecorn.com/",twitter:"https://x.com/use_corn"}}];function et(r,e){if(r.status!=="live"||!e[r.id])return null;const t=e[r.id].usd,s=parseFloat(r.buyPrice);return(t/s-1)*100}function tt(r){const e=r/100+1;return`${r.toFixed(2)}% (${e.toFixed(2)}x)`}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(r,e)=>{const t=w.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...c},d)=>w.createElement("svg",{ref:d,...Mr,width:n,height:n,stroke:s,strokeWidth:a?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Ur(r)}`,o].join(" "),...c},[...e.map(([f,p])=>w.createElement(f,p)),...Array.isArray(l)?l:[l]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=te("ArrowBigDown",[["path",{d:"M15 6v6h4l-7 7-7-7h4V6h6z",key:"1thax2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=te("ArrowBigUp",[["path",{d:"M9 18v-6H5l7-7 7 7h-4v6H9z",key:"1x06kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=te("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=te("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),ws="https://api.bybit.com/v5/market",Wr=.04;let Zt=null;const st={},_s=5*60*1e3;async function xs(r,e=5e3){const t=new AbortController,s=setTimeout(()=>t.abort(),e);try{const n=await fetch(r,{headers:{Accept:"application/json","User-Agent":"LegionRoiTracker/1.0"},signal:t.signal,cache:"no-cache"});return clearTimeout(s),n}catch(n){throw clearTimeout(s),n}}async function ks(){var s,n,i;const r="token-price",e=Date.now(),t=st[r];if(t&&e-t.timestamp<_s)return t.data;try{const a=await xs(`${ws}/tickers?category=spot&symbol=FUELUSDT`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const o=await a.json();if((i=(n=(s=o==null?void 0:o.result)==null?void 0:s.list)==null?void 0:n[0])!=null&&i.lastPrice){const l=parseFloat(o.result.list[0].lastPrice);if(isNaN(l)||l<=0)throw new Error("Invalid price value received");Zt=l;const c={"fuel-network":{usd:l}};return st[r]={data:c,timestamp:e},c}throw new Error("Invalid response format")}catch(a){return console.error("Error fetching price data:",a),{"fuel-network":{usd:Zt??Wr}}}}async function Zr(r="240",e=200){var i;const t=`candlestick-${r}`,s=Date.now(),n=st[t];if(n&&s-n.timestamp<_s)return n.data;try{const a=`${ws}/kline?category=spot&symbol=FUELUSDT&interval=${r}&limit=${e}`,o=await xs(a);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();if(!((i=l==null?void 0:l.result)!=null&&i.list))throw new Error("Invalid response format from ByBit");const c=l.result.list.map(d=>({time:new Date(parseInt(d[0])>9999999999?parseInt(d[0]):parseInt(d[0])*1e3).toISOString(),open:parseFloat(d[1]),high:parseFloat(d[2]),low:parseFloat(d[3]),close:parseFloat(d[4]),volume:parseFloat(d[5])})).reverse();return st[t]={data:c,timestamp:s},c}catch(a){throw console.error("Error fetching candlestick data:",a),a}}const Kr={"fuel-network":{usd:.04}};function Gr(){const[r,e]=w.useState(Kr),[t,s]=w.useState(!0),[n,i]=w.useState(null),[a,o]=w.useState(0);w.useEffect(()=>{const c=async()=>{try{i(null);const f=await ks();e(f),o(0)}catch(f){if(console.error("Error fetching prices:",f),i(f instanceof Error?f.message:"Failed to fetch prices"),a<3){const p=Math.min(1e3*Math.pow(2,a),1e4);setTimeout(()=>{o(h=>h+1)},p)}}finally{s(!1)}};c();const d=setInterval(c,3e4);return()=>clearInterval(d)},[a]);const l=c=>{switch(c){case"live":return"text-green-400";case"pending":return"text-pink-400";case"upcoming":return"text-cyan-400";default:return"text-gray-400"}};return n?u.jsxs("div",{className:"text-center p-4 bg-pink-500/10 rounded-lg border border-pink-500/20",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[u.jsx(bs,{className:"text-pink-500"}),u.jsx("p",{className:"text-pink-500",children:n})]}),u.jsx("p",{className:"text-cyan-300 text-sm",children:"Using last known prices"})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-cyan-500/20",children:[u.jsx("th",{className:"p-4 text-center text-pink-500",children:"Token"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Logo"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Date"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Buy Price"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Current Price"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Current ROI"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Unlock ROI"}),u.jsx("th",{className:"p-4 text-pink-500",children:"ATH ROI"})]})}),u.jsx("tbody",{children:ys.map(c=>{var v;const d=et(c,r),f=c.status==="live"?(v=r[c.id])==null?void 0:v.usd:null,p=c.unlockPrice?et(c,{[c.id]:{usd:parseFloat(c.unlockPrice)}}):null,h=c.highestPrice?et(c,{[c.id]:{usd:parseFloat(c.highestPrice)}}):null;return u.jsxs("tr",{className:"border-b border-cyan-500/20 hover:bg-cyan-500/5 transition-colors",children:[u.jsx("td",{className:"text-center p-4",children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(ps,{to:`/token/${c.id}`,className:"text-cyan-400 hover:text-pink-400 transition-colors",children:c.name}),c.link&&u.jsx("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-pink-400 transition-colors",children:u.jsx(Vr,{size:16})})]})}),u.jsx("td",{className:"p-4",children:u.jsx("img",{src:c.logo,alt:`${c.name} logo`,className:"w-8 h-8 rounded-full mx-auto ring-1 ring-cyan-500/20"})}),u.jsx("td",{className:"text-center p-4",children:c.date}),u.jsxs("td",{className:"text-center p-4",children:["$",c.buyPrice]}),u.jsx("td",{className:"text-center p-4",children:c.status==="live"?t?u.jsx("span",{className:"animate-pulse",children:"Loading..."}):f?`$${f.toFixed(6)}`:"N/A":u.jsx("span",{className:l(c.status),children:c.status==="pending"?"Pending TGE":"Upcoming ICO"})}),u.jsx("td",{className:"text-center p-4",children:c.status==="live"?t?u.jsx("span",{className:"animate-pulse",children:"Loading..."}):d?u.jsx("span",{className:d>=100?"text-green-400":"text-pink-500",children:tt(d)}):"N/A":u.jsx("span",{className:l(c.status),children:c.status==="pending"?"Pending TGE":"Upcoming ICO"})}),u.jsx("td",{className:"text-center p-4",children:p&&u.jsx("span",{className:p>=100?"text-green-400":"text-pink-500",children:tt(p)})}),u.jsx("td",{className:"text-center p-4",children:h&&u.jsx("span",{className:"text-green-400",children:tt(h)})})]},c.id)})})]})})}var Yr=r=>{switch(r){case"success":return en;case"info":return sn;case"warning":return tn;case"error":return rn;default:return null}},Xr=Array(12).fill(0),Qr=({visible:r,className:e})=>y.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},y.createElement("div",{className:"sonner-spinner"},Xr.map((t,s)=>y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),en=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tn=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),sn=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rn=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),nn=y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),an=()=>{let[r,e]=y.useState(document.hidden);return y.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r},jt=1,on=class{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{let e=this.subscribers.indexOf(r);this.subscribers.splice(e,1)}),this.publish=r=>{this.subscribers.forEach(e=>e(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var e;let{message:t,...s}=r,n=typeof(r==null?void 0:r.id)=="number"||((e=r.id)==null?void 0:e.length)>0?r.id:jt++,i=this.toasts.find(o=>o.id===n),a=r.dismissible===void 0?!0:r.dismissible;return i?this.toasts=this.toasts.map(o=>o.id===n?(this.publish({...o,...r,id:n,title:t}),{...o,...r,id:n,dismissible:a,title:t}):o):this.addToast({title:t,...s,dismissible:a,id:n}),n},this.dismiss=r=>(r||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:r,dismiss:!0})),r),this.message=(r,e)=>this.create({...e,message:r}),this.error=(r,e)=>this.create({...e,message:r,type:"error"}),this.success=(r,e)=>this.create({...e,type:"success",message:r}),this.info=(r,e)=>this.create({...e,type:"info",message:r}),this.warning=(r,e)=>this.create({...e,type:"warning",message:r}),this.loading=(r,e)=>this.create({...e,type:"loading",message:r}),this.promise=(r,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:r,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=r instanceof Promise?r:r(),n=t!==void 0,i,a=s.then(async l=>{if(i=["resolve",l],y.isValidElement(l))n=!1,this.create({id:t,type:"default",message:l});else if(cn(l)&&!l.ok){n=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:c,description:d})}else if(e.success!==void 0){n=!1;let c=typeof e.success=="function"?await e.success(l):e.success,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:c,description:d})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){n=!1;let c=typeof e.error=="function"?await e.error(l):e.error,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:c,description:d})}}).finally(()=>{var l;n&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),o=()=>new Promise((l,c)=>a.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof t!="string"&&typeof t!="number"?{unwrap:o}:Object.assign(t,{unwrap:o})},this.custom=(r,e)=>{let t=(e==null?void 0:e.id)||jt++;return this.create({jsx:r(t),id:t,...e}),t},this.subscribers=[],this.toasts=[]}},W=new on,ln=(r,e)=>{let t=(e==null?void 0:e.id)||jt++;return W.addToast({title:r,...e,id:t}),t},cn=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",dn=ln,un=()=>W.toasts,hn=Object.assign(dn,{success:W.success,info:W.info,warning:W.warning,error:W.error,custom:W.custom,message:W.message,promise:W.promise,dismiss:W.dismiss,loading:W.loading},{getHistory:un});function fn(r,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}fn(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ke(r){return r.label!==void 0}var pn=3,mn="32px",Kt=4e3,gn=356,vn=14,yn=20,bn=200;function wn(...r){return r.filter(Boolean).join(" ")}var _n=r=>{var e,t,s,n,i,a,o,l,c,d,f;let{invert:p,toast:h,unstyled:v,interacting:m,setHeights:g,visibleToasts:k,heights:b,index:j,toasts:I,expanded:$,removeToast:z,defaultRichColors:ue,closeButton:se,style:_,cancelButtonStyle:L,actionButtonStyle:re,className:U="",descriptionClassName:X="",duration:H,position:ft,gap:he,loadingIcon:ne,expandByDefault:ze,classNames:E,icons:q,closeButtonAriaLabel:pt="Close toast",pauseWhenPageIsHidden:A,cn:P}=r,[N,B]=y.useState(!1),[fe,D]=y.useState(!1),[mt,Oe]=y.useState(!1),[Ne,Re]=y.useState(!1),[Qs,Dt]=y.useState(!1),[er,gt]=y.useState(0),[tr,Mt]=y.useState(0),qe=y.useRef(h.duration||H||Kt),Ut=y.useRef(null),be=y.useRef(null),sr=j===0,rr=j+1<=k,Z=h.type,we=h.dismissible!==!1,nr=h.className||"",ir=h.descriptionClassName||"",Je=y.useMemo(()=>b.findIndex(x=>x.toastId===h.id)||0,[b,h.id]),ar=y.useMemo(()=>{var x;return(x=h.closeButton)!=null?x:se},[h.closeButton,se]);y.useMemo(()=>h.duration||H||Kt,[h.duration,H]);let vt=y.useRef(0),_e=y.useRef(0),Ht=y.useRef(0),We=y.useRef(null),[Bt,or]=ft.split("-"),Vt=y.useMemo(()=>b.reduce((x,T,R)=>R>=Je?x:x+T.height,0),[b,Je]),Ft=an(),lr=h.invert||p,yt=Z==="loading";_e.current=y.useMemo(()=>Je*he+Vt,[Je,Vt]),y.useEffect(()=>{B(!0)},[]),y.useEffect(()=>{let x=be.current;if(x){let T=x.getBoundingClientRect().height;return Mt(T),g(R=>[{toastId:h.id,height:T,position:h.position},...R]),()=>g(R=>R.filter(G=>G.toastId!==h.id))}},[g,h.id]),y.useLayoutEffect(()=>{if(!N)return;let x=be.current,T=x.style.height;x.style.height="auto";let R=x.getBoundingClientRect().height;x.style.height=T,Mt(R),g(G=>G.find(Q=>Q.toastId===h.id)?G.map(Q=>Q.toastId===h.id?{...Q,height:R}:Q):[{toastId:h.id,height:R,position:h.position},...G])},[N,h.title,h.description,g,h.id]);let ae=y.useCallback(()=>{D(!0),gt(_e.current),g(x=>x.filter(T=>T.toastId!==h.id)),setTimeout(()=>{z(h)},bn)},[h,z,g,_e]);y.useEffect(()=>{if(h.promise&&Z==="loading"||h.duration===1/0||h.type==="loading")return;let x;return $||m||A&&Ft?(()=>{if(Ht.current<vt.current){let T=new Date().getTime()-vt.current;qe.current=qe.current-T}Ht.current=new Date().getTime()})():qe.current!==1/0&&(vt.current=new Date().getTime(),x=setTimeout(()=>{var T;(T=h.onAutoClose)==null||T.call(h,h),ae()},qe.current)),()=>clearTimeout(x)},[$,m,h,Z,A,Ft,ae]),y.useEffect(()=>{h.delete&&ae()},[ae,h.delete]);function cr(){var x,T,R;return q!=null&&q.loading?y.createElement("div",{className:P(E==null?void 0:E.loader,(x=h==null?void 0:h.classNames)==null?void 0:x.loader,"sonner-loader"),"data-visible":Z==="loading"},q.loading):ne?y.createElement("div",{className:P(E==null?void 0:E.loader,(T=h==null?void 0:h.classNames)==null?void 0:T.loader,"sonner-loader"),"data-visible":Z==="loading"},ne):y.createElement(Qr,{className:P(E==null?void 0:E.loader,(R=h==null?void 0:h.classNames)==null?void 0:R.loader),visible:Z==="loading"})}return y.createElement("li",{tabIndex:0,ref:be,className:P(U,nr,E==null?void 0:E.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,E==null?void 0:E.default,E==null?void 0:E[Z],(t=h==null?void 0:h.classNames)==null?void 0:t[Z]),"data-sonner-toast":"","data-rich-colors":(s=h.richColors)!=null?s:ue,"data-styled":!(h.jsx||h.unstyled||v),"data-mounted":N,"data-promise":!!h.promise,"data-swiped":Qs,"data-removed":fe,"data-visible":rr,"data-y-position":Bt,"data-x-position":or,"data-index":j,"data-front":sr,"data-swiping":mt,"data-dismissible":we,"data-type":Z,"data-invert":lr,"data-swipe-out":Ne,"data-expanded":!!($||ze&&N),style:{"--index":j,"--toasts-before":j,"--z-index":I.length-j,"--offset":`${fe?er:_e.current}px`,"--initial-height":ze?"auto":`${tr}px`,..._,...h.style},onPointerDown:x=>{yt||!we||(Ut.current=new Date,gt(_e.current),x.target.setPointerCapture(x.pointerId),x.target.tagName!=="BUTTON"&&(Oe(!0),We.current={x:x.clientX,y:x.clientY}))},onPointerUp:()=>{var x,T,R,G;if(Ne||!we)return;We.current=null;let Q=Number(((x=be.current)==null?void 0:x.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Ze=new Date().getTime()-((T=Ut.current)==null?void 0:T.getTime()),dr=Math.abs(Q)/Ze;if(Math.abs(Q)>=yn||dr>.11){gt(_e.current),(R=h.onDismiss)==null||R.call(h,h),ae(),Re(!0),Dt(!1);return}(G=be.current)==null||G.style.setProperty("--swipe-amount","0px"),Oe(!1)},onPointerMove:x=>{var T,R;if(!We.current||!we)return;let G=x.clientY-We.current.y,Q=((T=window.getSelection())==null?void 0:T.toString().length)>0,Ze=Bt==="top"?Math.min(0,G):Math.max(0,G);Math.abs(Ze)>0&&Dt(!0),!Q&&((R=be.current)==null||R.style.setProperty("--swipe-amount",`${Ze}px`))}},ar&&!h.jsx?y.createElement("button",{"aria-label":pt,"data-disabled":yt,"data-close-button":!0,onClick:yt||!we?()=>{}:()=>{var x;ae(),(x=h.onDismiss)==null||x.call(h,h)},className:P(E==null?void 0:E.closeButton,(n=h==null?void 0:h.classNames)==null?void 0:n.closeButton)},(i=q==null?void 0:q.close)!=null?i:nn):null,h.jsx||y.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:y.createElement(y.Fragment,null,Z||h.icon||h.promise?y.createElement("div",{"data-icon":"",className:P(E==null?void 0:E.icon,(a=h==null?void 0:h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||cr():null,h.type!=="loading"?h.icon||(q==null?void 0:q[Z])||Yr(Z):null):null,y.createElement("div",{"data-content":"",className:P(E==null?void 0:E.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},y.createElement("div",{"data-title":"",className:P(E==null?void 0:E.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},typeof h.title=="function"?h.title():h.title),h.description?y.createElement("div",{"data-description":"",className:P(X,ir,E==null?void 0:E.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),y.isValidElement(h.cancel)?h.cancel:h.cancel&&Ke(h.cancel)?y.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||L,onClick:x=>{var T,R;Ke(h.cancel)&&we&&((R=(T=h.cancel).onClick)==null||R.call(T,x),ae())},className:P(E==null?void 0:E.cancelButton,(d=h==null?void 0:h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,y.isValidElement(h.action)?h.action:h.action&&Ke(h.action)?y.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||re,onClick:x=>{var T,R;Ke(h.action)&&((R=(T=h.action).onClick)==null||R.call(T,x),!x.defaultPrevented&&ae())},className:P(E==null?void 0:E.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function Gt(){if(typeof window>"u"||typeof document>"u")return"ltr";let r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}var xn=w.forwardRef(function(r,e){let{invert:t,position:s="bottom-right",hotkey:n=["altKey","KeyT"],expand:i,closeButton:a,className:o,offset:l,theme:c="light",richColors:d,duration:f,style:p,visibleToasts:h=pn,toastOptions:v,dir:m=Gt(),gap:g=vn,loadingIcon:k,icons:b,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:I,cn:$=wn}=r,[z,ue]=y.useState([]),se=y.useMemo(()=>Array.from(new Set([s].concat(z.filter(A=>A.position).map(A=>A.position)))),[z,s]),[_,L]=y.useState([]),[re,U]=y.useState(!1),[X,H]=y.useState(!1),[ft,he]=y.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ne=y.useRef(null),ze=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=y.useRef(null),q=y.useRef(!1),pt=y.useCallback(A=>{ue(P=>{var N;return(N=P.find(B=>B.id===A.id))!=null&&N.delete||W.dismiss(A.id),P.filter(({id:B})=>B!==A.id)})},[]);return y.useEffect(()=>W.subscribe(A=>{if(A.dismiss){ue(P=>P.map(N=>N.id===A.id?{...N,delete:!0}:N));return}setTimeout(()=>{hr.flushSync(()=>{ue(P=>{let N=P.findIndex(B=>B.id===A.id);return N!==-1?[...P.slice(0,N),{...P[N],...A},...P.slice(N+1)]:[A,...P]})})})}),[]),y.useEffect(()=>{if(c!=="system"){he(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?he("dark"):he("light")),typeof window>"u")return;let A=window.matchMedia("(prefers-color-scheme: dark)");try{A.addEventListener("change",({matches:P})=>{he(P?"dark":"light")})}catch{A.addListener(({matches:N})=>{try{he(N?"dark":"light")}catch(B){console.error(B)}})}},[c]),y.useEffect(()=>{z.length<=1&&U(!1)},[z]),y.useEffect(()=>{let A=P=>{var N,B;n.every(fe=>P[fe]||P.code===fe)&&(U(!0),(N=ne.current)==null||N.focus()),P.code==="Escape"&&(document.activeElement===ne.current||(B=ne.current)!=null&&B.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[n]),y.useEffect(()=>{if(ne.current)return()=>{E.current&&(E.current.focus({preventScroll:!0}),E.current=null,q.current=!1)}},[ne.current]),y.createElement("section",{"aria-label":`${j} ${ze}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"},se.map((A,P)=>{var N;let[B,fe]=A.split("-");return z.length?y.createElement("ol",{key:A,dir:m==="auto"?Gt():m,tabIndex:-1,ref:ne,className:o,"data-sonner-toaster":!0,"data-theme":ft,"data-y-position":B,"data-lifted":re&&z.length>1&&!i,"data-x-position":fe,style:{"--front-toast-height":`${((N=_[0])==null?void 0:N.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||mn,"--width":`${gn}px`,"--gap":`${g}px`,...p},onBlur:D=>{q.current&&!D.currentTarget.contains(D.relatedTarget)&&(q.current=!1,E.current&&(E.current.focus({preventScroll:!0}),E.current=null))},onFocus:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||q.current||(q.current=!0,E.current=D.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{X||U(!1)},onPointerDown:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||H(!0)},onPointerUp:()=>H(!1)},z.filter(D=>!D.position&&P===0||D.position===A).map((D,mt)=>{var Oe,Ne;return y.createElement(_n,{key:D.id,icons:b,index:mt,toast:D,defaultRichColors:d,duration:(Oe=v==null?void 0:v.duration)!=null?Oe:f,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:t,visibleToasts:h,closeButton:(Ne=v==null?void 0:v.closeButton)!=null?Ne:a,interacting:X,position:A,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:pt,toasts:z.filter(Re=>Re.position==D.position),heights:_.filter(Re=>Re.position==D.position),setHeights:L,expandByDefault:i,gap:g,loadingIcon:k,expanded:re,pauseWhenPageIsHidden:I,cn:$})})):null}))});function kn({currentPrice:r}){const[e,t]=w.useState(""),[s,n]=w.useState("0.02"),[i,a]=w.useState(null);return w.useEffect(()=>{if(r&&e&&s){const o=parseFloat(e),l=parseFloat(s);if(o>0&&l>0){const c=o/l,d=c*r,f=d-o,p=f/o*100;a({currentValue:d,gainLoss:f,gainLossPercentage:p,tokens:c})}}},[e,s,r]),u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Investment Calculator"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-cyan-300 mb-1",children:"Investment Amount ($)"}),u.jsx("input",{type:"number",value:e,onChange:o=>t(o.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100 focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Enter investment amount",min:"0",step:"0.01"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-cyan-300 mb-1",children:"Purchase Price ($)"}),u.jsx("input",{type:"number",value:s,onChange:o=>n(o.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100 focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Enter purchase price",min:"0",step:"0.000001"})]}),i&&r&&u.jsxs("div",{className:"mt-6 space-y-2 p-4 bg-black/40 rounded-lg border border-cyan-500/20",children:[u.jsxs("p",{className:"text-cyan-300",children:["Tokens: ",u.jsx("span",{className:"text-pink-400",children:i.tokens.toLocaleString(void 0,{maximumFractionDigits:2})})]}),u.jsxs("p",{className:"text-cyan-300",children:["Current Value: ",u.jsxs("span",{className:"text-pink-400",children:["$",i.currentValue.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),u.jsxs("p",{className:"text-cyan-300",children:["Gain/Loss:"," ",u.jsxs("span",{className:i.gainLoss>=0?"text-green-400":"text-red-400",children:["$",Math.abs(i.gainLoss).toLocaleString(void 0,{maximumFractionDigits:2})," ","(",i.gainLoss>=0?"+":"-",Math.abs(i.gainLossPercentage).toFixed(2),"%)"]})]})]})]})]})}const jn="modulepreload",Cn=function(r){return"/"+r},Yt={},Ee=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map(l=>{if(l=Cn(l),l in Yt)return;Yt[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":jn,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Sn=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Ee(async()=>{const{default:s}=await Promise.resolve().then(()=>$e);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Ot extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class En extends Ot{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Pn extends Ot{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Tn extends Ot{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ct;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Ct||(Ct={}));var $n=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(f){a(f)}}function l(d){try{c(s.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};class An{constructor(e,{headers:t={},customFetch:s,region:n=Ct.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Sn(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return $n(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let c;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:c}).catch(v=>{throw new En(v)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new Pn(d);if(!d.ok)throw new Tn(d);let p=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),h;return p==="application/json"?h=yield d.json():p==="application/octet-stream"?h=yield d.blob():p==="text/event-stream"?h=d:p==="multipart/form-data"?h=yield d.formData():h=yield d.text(),{data:h,error:null}}catch(n){return{data:null,error:n}}})}}var F={},Nt={},it={},Ve={},at={},ot={},On=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pe=On();const Nn=Pe.fetch,js=Pe.fetch.bind(Pe),Cs=Pe.Headers,Rn=Pe.Request,In=Pe.Response,$e=Object.freeze(Object.defineProperty({__proto__:null,Headers:Cs,Request:Rn,Response:In,default:js,fetch:Nn},Symbol.toStringTag,{value:"Module"})),Ln=fr($e);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});let Dn=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};lt.default=Dn;var Ss=K&&K.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ot,"__esModule",{value:!0});const Mn=Ss(Ln),Un=Ss(lt);let Hn=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Mn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let c=null,d=null,f=null,p=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const k=await i.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=k:d=JSON.parse(k))}const m=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");m&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,p=406,h="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const m=await i.text();try{c=JSON.parse(m),Array.isArray(c)&&i.status===404&&(d=[],c=null,p=200,h="OK")}catch{i.status===404&&m===""?(p=204,h="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,p=200,h="OK"),c&&this.shouldThrowOnError)throw new Un.default(c)}return{error:c,data:d,count:f,status:p,statusText:h}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}};ot.default=Hn;var Bn=K&&K.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(at,"__esModule",{value:!0});const Vn=Bn(ot);let Fn=class extends Vn.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};at.default=Fn;var zn=K&&K.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ve,"__esModule",{value:!0});const qn=zn(at);let Jn=class extends qn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Ve.default=Jn;var Wn=K&&K.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(it,"__esModule",{value:!0});const Ie=Wn(Ve);let Zn=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),s&&(this.headers.Prefer=`count=${s}`),new Ie.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Ie.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ie.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Ie.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Ie.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};it.default=Zn;var ct={},dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.version=void 0;dt.version="0.0.0-automated";Object.defineProperty(ct,"__esModule",{value:!0});ct.DEFAULT_HEADERS=void 0;const Kn=dt;ct.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Kn.version}`};var Es=K&&K.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nt,"__esModule",{value:!0});const Gn=Es(it),Yn=Es(Ve),Xn=ct;let Qn=class Ps{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Xn.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Gn.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ps(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;s||n?(a=s?"HEAD":"GET",Object.entries(t).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{o.searchParams.append(d,f)})):(a="POST",l=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Yn.default({method:a,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Nt.default=Qn;var Ae=K&&K.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(F,"__esModule",{value:!0});F.PostgrestError=F.PostgrestBuilder=F.PostgrestTransformBuilder=F.PostgrestFilterBuilder=F.PostgrestQueryBuilder=F.PostgrestClient=void 0;const Ts=Ae(Nt);F.PostgrestClient=Ts.default;const $s=Ae(it);F.PostgrestQueryBuilder=$s.default;const As=Ae(Ve);F.PostgrestFilterBuilder=As.default;const Os=Ae(at);F.PostgrestTransformBuilder=Os.default;const Ns=Ae(ot);F.PostgrestBuilder=Ns.default;const Rs=Ae(lt);F.PostgrestError=Rs.default;var ei=F.default={PostgrestClient:Ts.default,PostgrestQueryBuilder:$s.default,PostgrestFilterBuilder:As.default,PostgrestTransformBuilder:Os.default,PostgrestBuilder:Ns.default,PostgrestError:Rs.default};const{PostgrestClient:ti,PostgrestQueryBuilder:$o,PostgrestFilterBuilder:Ao,PostgrestTransformBuilder:Oo,PostgrestBuilder:No,PostgrestError:Ro}=ei,si="2.11.2",ri={"X-Client-Info":`realtime-js/${si}`},ni="1.0.0",Is=1e4,ii=1e3;var Se;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Se||(Se={}));var J;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(J||(J={}));var Y;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Y||(Y={}));var St;(function(r){r.websocket="websocket"})(St||(St={}));var ge;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(ge||(ge={}));class ai{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+n));a=a+n;const l=s.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class Ls{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var O;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(O||(O={}));const Xt=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,a)=>(i[a]=oi(a,r,e,n),i),{})},oi=(r,e,t,s)=>{const n=e.find(o=>o.name===r),i=n==null?void 0:n.type,a=t[r];return i&&!s.includes(i)?Ds(i,a):Et(a)},Ds=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return ui(e,t)}switch(r){case O.bool:return li(e);case O.float4:case O.float8:case O.int2:case O.int4:case O.int8:case O.numeric:case O.oid:return ci(e);case O.json:case O.jsonb:return di(e);case O.timestamp:return hi(e);case O.abstime:case O.date:case O.daterange:case O.int4range:case O.int8range:case O.money:case O.reltime:case O.text:case O.time:case O.timestamptz:case O.timetz:case O.tsrange:case O.tstzrange:return Et(e);default:return Et(e)}},Et=r=>r,li=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},ci=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},di=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},ui=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Ds(e,o))}return r},hi=r=>typeof r=="string"?r.replace(" ","T"):r,Ms=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class bt{constructor(e,t,s={},n=Is){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qt;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Qt||(Qt={}));class Me{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Me.syncState(this.state,n,i,a),this.pendingDiffs.forEach(l=>{this.state=Me.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Me.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(c,d)=>{a[c]||(l[c]=d)}),this.map(a,(c,d)=>{const f=i[c];if(f){const p=d.map(g=>g.presence_ref),h=f.map(g=>g.presence_ref),v=d.filter(g=>h.indexOf(g.presence_ref)<0),m=f.filter(g=>p.indexOf(g.presence_ref)<0);v.length>0&&(o[c]=v),m.length>0&&(l[c]=m)}else o[c]=d}),this.syncDiff(i,{joins:o,leaves:l},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(o,l)=>{var c;const d=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),d.length>0){const f=e[o].map(h=>h.presence_ref),p=d.filter(h=>f.indexOf(h.presence_ref)<0);e[o].unshift(...p)}s(o,d,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const d=l.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=c,n(o,c,l),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var es;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(es||(es={}));var ts;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ts||(ts={}));var ie;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(ie||(ie={}));class Rt{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=J.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new bt(this,Y.join,this.params,this.timeout),this.rejoinTimer=new Ls(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=J.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=J.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=J.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=J.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Y.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Me(this),this.broadcastEndpointURL=Ms(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(d=>e==null?void 0:e(ie.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(ie.CLOSED));const l={},c={broadcast:i,presence:a,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(ie.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,h=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,v=[];for(let m=0;m<h;m++){const g=p[m],{filter:{event:k,schema:b,table:j,filter:I}}=g,$=d&&d[m];if($&&$.event===k&&$.schema===b&&$.table===j&&$.filter===I)v.push(Object.assign(Object.assign({},g),{id:$.id}));else{this.unsubscribe(),e==null||e(ie.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(ie.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(ie.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ie.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=J.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Y.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new bt(this,Y.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new bt(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:d}=Y;if(s&&[o,l,c,d].indexOf(a)>=0&&s!==this._joinRef())return;let p=this._onMessage(a,t,s);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(h=>{var v,m,g;return((v=h.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(m=h.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===a}).map(h=>h.callback(p,s)):(i=this.bindings[a])===null||i===void 0||i.filter(h=>{var v,m,g,k,b,j;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in h){const I=h.id,$=(v=h.filter)===null||v===void 0?void 0:v.event;return I&&((m=t.ids)===null||m===void 0?void 0:m.includes(I))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const I=(b=(k=h==null?void 0:h.filter)===null||k===void 0?void 0:k.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return I==="*"||I===((j=t==null?void 0:t.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===a}).map(h=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:m,table:g,commit_timestamp:k,type:b,errors:j}=v;p=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:k,eventType:b,new:{},old:{},errors:j}),this._getPayloadRecords(v))}h.callback(p,s)})}_isClosed(){return this.state===J.closed}_isJoined(){return this.state===J.joined}_isJoining(){return this.state===J.joining}_isLeaving(){return this.state===J.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Rt.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Y.close,{},e)}_onError(e){this._on(Y.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=J.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Xt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Xt(e.columns,e.old_record)),t}}const fi=()=>{},pi=typeof WebSocket<"u",mi=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gi{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=ri,this.params={},this.timeout=Is,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=fi,this.conn=null,this.sendBuffer=[],this.serializer=new ai,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Ee(async()=>{const{default:l}=await Promise.resolve().then(()=>$e);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${St.websocket}`,this.httpEndpoint=Ms(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ls(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(pi){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new vi(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Ee(async()=>{const{default:e}=await import("./browser-PGfHBM1y.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ni}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Se.connecting:return ge.Connecting;case Se.open:return ge.Open;case Se.closing:return ge.Closing;default:return ge.Closed}}isConnected(){return this.connectionState()===ge.Open}channel(e,t={config:{}}){const s=new Rt(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let s=null;try{s=JSON.parse(atob(t.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(Y.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ii,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:a}=t;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(s)).forEach(o=>o._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Y.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([mi],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class vi{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Se.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class It extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function M(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class yi extends It{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Pt extends It{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var bi=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(f){a(f)}}function l(d){try{c(s.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};const Us=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Ee(async()=>{const{default:s}=await Promise.resolve().then(()=>$e);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},wi=()=>bi(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ee(()=>Promise.resolve().then(()=>$e),void 0)).Response:Response}),Tt=r=>{if(Array.isArray(r))return r.map(t=>Tt(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Tt(s)}),e};var ve=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(f){a(f)}}function l(d){try{c(s.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};const wt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),_i=(r,e,t)=>ve(void 0,void 0,void 0,function*(){const s=yield wi();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{e(new yi(wt(n),r.status||500))}).catch(n=>{e(new Pt(wt(n),n))}):e(new Pt(wt(r),r))}),xi=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function Fe(r,e,t,s,n,i){return ve(this,void 0,void 0,function*(){return new Promise((a,o)=>{r(t,xi(e,s,n,i)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>_i(l,o,s))})})}function rt(r,e,t,s){return ve(this,void 0,void 0,function*(){return Fe(r,"GET",e,t,s)})}function ce(r,e,t,s,n){return ve(this,void 0,void 0,function*(){return Fe(r,"POST",e,s,n,t)})}function ki(r,e,t,s,n){return ve(this,void 0,void 0,function*(){return Fe(r,"PUT",e,s,n,t)})}function ji(r,e,t,s){return ve(this,void 0,void 0,function*(){return Fe(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Hs(r,e,t,s,n){return ve(this,void 0,void 0,function*(){return Fe(r,"DELETE",e,s,n,t)})}var V=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(f){a(f)}}function l(d){try{c(s.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};const Ci={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ss={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Si{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Us(n)}uploadOrUpdate(e,t,s,n){return V(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},ss),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),p=yield f.json();return f.ok?{data:{path:c,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(M(i))return{data:null,error:i};throw i}})}upload(e,t,s){return V(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return V(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:ss.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:d}),p=yield f.json();return f.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(M(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return V(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield ce(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new It("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(s){if(M(s))return{data:null,error:s};throw s}})}update(e,t,s){return V(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return V(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}})}copy(e,t,s){return V(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return V(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield ce(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return V(this,void 0,void 0,function*(){try{const n=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}})}download(e,t){return V(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield rt(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(M(o))return{data:null,error:o};throw o}})}info(e){return V(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield rt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Tt(s),error:null}}catch(s){if(M(s))return{data:null,error:s};throw s}})}exists(e){return V(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield ji(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(M(s)&&s instanceof Pt){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${c}`)}}}remove(e){return V(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}})}list(e,t,s){return V(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ci),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ei="2.7.1",Pi={"X-Client-Info":`storage-js/${Ei}`};var xe=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(f){a(f)}}function l(d){try{c(s.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};class Ti{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Pi),t),this.fetch=Us(s)}listBuckets(){return xe(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(M(e))return{data:null,error:e};throw e}})}getBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return xe(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(M(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return xe(this,void 0,void 0,function*(){try{return{data:yield ki(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(M(s))return{data:null,error:s};throw s}})}emptyBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}})}}class $i extends Ti{constructor(e,t={},s){super(e,t,s)}from(e){return new Si(this.url,this.headers,e,this.fetch)}}const Ai="2.47.12";let De="";typeof Deno<"u"?De="deno":typeof document<"u"?De="web":typeof navigator<"u"&&navigator.product==="ReactNative"?De="react-native":De="node";const Oi={"X-Client-Info":`supabase-js-${De}/${Ai}`},Ni={headers:Oi},Ri={schema:"public"},Ii={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Li={};var Di=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(f){a(f)}}function l(d){try{c(s.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};const Mi=r=>{let e;return r?e=r:typeof fetch>"u"?e=js:e=fetch,(...t)=>e(...t)},Ui=()=>typeof Headers>"u"?Cs:Headers,Hi=(r,e,t)=>{const s=Mi(t),n=Ui();return(i,a)=>Di(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:r;let c=new n(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",r),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(i,Object.assign(Object.assign({},a),{headers:c}))})};var Bi=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(f){a(f)}}function l(d){try{c(s.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};function Vi(r){return r.replace(/\/$/,"")}function Fi(r,e){const{db:t,auth:s,realtime:n,global:i}=r,{db:a,auth:o,realtime:l,global:c}=e,d={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),s),realtime:Object.assign(Object.assign({},l),n),global:Object.assign(Object.assign({},c),i),accessToken:()=>Bi(this,void 0,void 0,function*(){return""})};return r.accessToken?d.accessToken=r.accessToken:delete d.accessToken,d}const Bs="2.67.3",zi="http://localhost:9999",qi="supabase.auth.token",Ji={"X-Client-Info":`gotrue-js/${Bs}`},rs=10,$t="X-Supabase-Api-Version",Vs={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Wi(r){return Math.round(Date.now()/1e3)+r}function Zi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const ee=()=>typeof window<"u"&&typeof document<"u",pe={tested:!1,writable:!1},Ue=()=>{if(!ee())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pe.tested)return pe.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),pe.tested=!0,pe.writable=!0}catch{pe.tested=!0,pe.writable=!1}return pe.writable};function Ki(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Fs=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Ee(async()=>{const{default:s}=await Promise.resolve().then(()=>$e);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Gi=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",zs=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Ge=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ye=async(r,e)=>{await r.removeItem(e)};function Yi(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,n,i,a,o,l,c,d=0;for(r=r.replace("-","+").replace("_","/");d<r.length;)a=e.indexOf(r.charAt(d++)),o=e.indexOf(r.charAt(d++)),l=e.indexOf(r.charAt(d++)),c=e.indexOf(r.charAt(d++)),s=a<<2|o>>4,n=(o&15)<<4|l>>2,i=(l&3)<<6|c,t=t+String.fromCharCode(s),l!=64&&n!=0&&(t=t+String.fromCharCode(n)),c!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class ut{constructor(){this.promise=new ut.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ut.promiseConstructor=Promise;function ns(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(Yi(s))}async function Xi(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Qi(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function ea(r){return("0"+r.toString(16)).substr(-2)}function ta(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,ea).join("")}async function sa(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function ra(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function na(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await sa(r);return ra(t)}async function ke(r,e,t=!1){const s=ta();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await zs(r,`${e}-code-verifier`,n);const i=await na(s);return[i,s===i?"plain":"s256"]}const ia=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aa(r){const e=r.headers.get($t);if(!e||!e.match(ia))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Lt extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function C(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class oa extends Lt{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function la(r){return C(r)&&r.name==="AuthApiError"}class qs extends Lt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ye extends Lt{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class oe extends ye{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ca(r){return C(r)&&r.name==="AuthSessionMissingError"}class _t extends ye{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xe extends ye{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qe extends ye{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function da(r){return C(r)&&r.name==="AuthImplicitGrantRedirectError"}class is extends ye{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class At extends ye{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function xt(r){return C(r)&&r.name==="AuthRetryableFetchError"}class as extends ye{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var ua=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const me=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),ha=[502,503,504];async function os(r){var e;if(!Gi(r))throw new At(me(r),0);if(ha.includes(r.status))throw new At(me(r),r.status);let t;try{t=await r.json()}catch(i){throw new qs(me(i),i)}let s;const n=aa(r);if(n&&n.getTime()>=Vs["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new as(me(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new oe}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new as(me(t),r.status,t.weak_password.reasons);throw new oa(me(t),r.status||500,s)}const fa=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function S(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[$t]||(i[$t]=Vs["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await pa(r,e,t+o,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function pa(r,e,t,s,n,i){const a=fa(e,s,n,i);let o;try{o=await r(t,Object.assign({},a))}catch(l){throw console.error(l),new At(me(l),0)}if(o.ok||await os(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(l){await os(l)}}function le(r){var e;let t=null;ya(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Wi(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function ls(r){const e=le(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function de(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function ma(r){return{data:r,error:null}}function ga(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,a=ua(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function va(r){return r}function ya(r){return r.access_token&&r.refresh_token&&r.expires_in}var ba=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class wa{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Fs(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await S(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await S(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:de})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=ba(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await S(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:ga,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(C(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await S(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:de})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await S(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:va});if(d.error)throw d.error;const f=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,h=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);c[`${g}Page`]=m}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(C(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await S(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:de})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await S(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:de})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await S(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:de})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await S(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(C(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await S(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}}const _a={getItem:r=>Ue()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Ue()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Ue()&&globalThis.localStorage.removeItem(r)}};function cs(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function xa(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const je={debug:!!(globalThis&&Ue()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Js extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ka extends Js{}async function ja(r,e,t){je.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),je.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){je.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{je.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw je.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new ka(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(je.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}xa();const Ca={url:zi,storageKey:qi,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ji,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Le=30*1e3,ds=3;async function us(r,e,t){return await t()}class He{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=He.nextInstanceID,He.nextInstanceID+=1,this.instanceID>0&&ee()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Ca),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new wa({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Fs(n.fetch),this.lock=n.lock||us,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ee()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ja:this.lock=us,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Ue()?this.storage=_a:(this.memoryStorage={},this.storage=cs(this.memoryStorage)):(this.memoryStorage={},this.storage=cs(this.memoryStorage)),ee()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bs}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Ki(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),ee()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),da(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return C(t)?{error:t}:{error:new qs("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:le}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:d,password:f,options:p}=e;let h=null,v=null;this.flowType==="pkce"&&([h,v]=await ke(this.storage,this.storageKey)),i=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:v},xform:le})}else if("phone"in e){const{phone:d,password:f,options:p}=e;i=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:le})}else throw new Xe("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ls})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ls})}else throw new Xe("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new _t}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Ge(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:i,error:a}=await S(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:le});if(await Ye(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new _t}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(C(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:a}=e,o=await S(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:le}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new _t}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await ke(this.storage,this.storageKey));const{error:f}=await S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:d}=await S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Xe("You must provide either an email or phone number.")}catch(o){if(C(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await S(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:le});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(C(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await ke(this.storage,this.storageKey)),await S(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:ma})}catch(i){if(C(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new oe;const{error:n}=await S(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(C(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:a}=await S(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:a,error:o}=await S(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Xe("You must provide either an email or phone number and a type")}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ge(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:de}):await this._useSession(async t=>{var s,n,i;const{data:a,error:o}=t;if(o)throw o;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new oe}:await S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:de})})}catch(t){if(C(t))return ca(t)&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new oe;const a=n.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await ke(this.storage,this.storageKey));const{data:c,error:d}=await S(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:de});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return ns(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new oe;const t=Date.now()/1e3;let s=t,n=!0,i=null;const a=ns(e.access_token);if(a.exp&&(s=a.exp,n=s<=t),n){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(C(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new oe;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ee())throw new Qe("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qe(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new is("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qe("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new is("No code detected.");const{data:b,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!i||!o||!a||!c)throw new Qe("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let p=d+f;l&&(p=parseInt(l));const h=p-d;h*1e3<=Le&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const v=p-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,d);const{data:m,error:g}=await this._getUser(i);if(g)throw g;const k={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:p,refresh_token:a,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(s){if(C(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ge(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(la(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Ye(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Zi(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await ke(this.storage,this.storageKey,!0));try{return await S(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(C(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var a,o,l,c,d;const{data:f,error:p}=i;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await S(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return ee()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(C(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)throw a;return await S(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Qi(async n=>(n>0&&await Xi(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await S(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:le})),(n,i)=>{const a=200*Math.pow(2,n);return i&&xt(i)&&Date.now()+a-s<Le})}catch(s){if(this._debug(t,"error",s),C(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),ee()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Ge(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+rs;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${rs}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),xt(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new oe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ut;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new oe;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),C(i)){const a={session:null,error:i};return xt(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await zs(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ye(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ee()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Le);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Le);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Le}ms, refresh threshold is ${ds} ticks`),n<=ds&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Js)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ee()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await ke(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await S(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await S(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await S(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await S(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(n.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}}He.nextInstanceID=0;const Sa=He;class Ea extends Sa{constructor(e){super(e)}}var Pa=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(s.next(d))}catch(f){a(f)}}function l(d){try{c(s.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):n(d.value).then(o,l)}c((s=s.apply(r,e||[])).next())})};class Ta{constructor(e,t,s){var n,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=Vi(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Ri,realtime:Li,auth:Object.assign(Object.assign({},Ii),{storageKey:l}),global:Ni},d=Fi(s??{},c);this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=Hi(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ti(`${o}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new An(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $i(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Pa(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:a,lock:o,debug:l},c,d){var f;const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ea({url:this.authUrl,headers:Object.assign(Object.assign({},p),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:a,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:(f="Authorization"in this.headers)!==null&&f!==void 0?f:!1})}_initRealtimeClient(e){return new gi(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $a=(r,e,t)=>new Ta(r,e,t),Aa="https://dpvwukegbhgdzamzgelm.supabase.co",Oa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRwdnd1a2VnYmhnZHphbXpnZWxtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY0NDA1MTUsImV4cCI6MjA1MjAxNjUxNX0.taHSWVOeai7BXi_qMRxthbrXJOOzO5Lzbaue-DUkfNY",Ce=$a(Aa,Oa,{auth:{persistSession:!1},global:{headers:{"Content-Type":"application/json"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:1}}});async function Na(){try{const{error:r}=await Ce.from("comments").select("count").limit(1).single();return!r}catch(r){return console.error("Supabase connection error:",r),!1}}function Ra({tokenId:r}){const[e,t]=w.useState([]),[s,n]=w.useState([]),[i,a]=w.useState(""),[o,l]=w.useState(""),[c,d]=w.useState(""),[f,p]=w.useState(""),[h,v]=w.useState("all"),[m,g]=w.useState(!0),[k,b]=w.useState(null),[j,I]=w.useState(!1);w.useEffect(()=>{async function _(){const L=await Na();I(L),L||b("Unable to connect to the database. Please try again later.")}_()},[]),w.useEffect(()=>{j&&$()},[r,h,j]);async function $(){g(!0);try{let _=Ce.from("comments").select("*").eq("token_id",r).order("created_at",{ascending:!1});if(h!=="all"){const H=new Date;h==="day"&&H.setDate(H.getDate()-1),h==="week"&&H.setDate(H.getDate()-7),h==="month"&&H.setMonth(H.getMonth()-1),_=_.gte("created_at",H.toISOString())}const{data:L,error:re}=await _;if(re)throw re;L&&t(L);const{data:U,error:X}=await Ce.from("price_predictions").select("*").eq("token_id",r).order("created_at",{ascending:!1});if(X)throw X;U&&n(U)}catch(_){console.error("Error fetching social data:",_),b("Failed to load social data. Please try again later.")}finally{g(!1)}}async function z(_){if(_.preventDefault(),!o.trim()||!i.trim()){alert("Please enter both a nickname and a comment");return}try{const{error:L}=await Ce.from("comments").insert({token_id:r,content:i.trim(),nickname:o.trim()});if(L)throw L;a(""),$()}catch(L){console.error("Error posting comment:",L),alert("Failed to post comment. Please try again.")}}async function ue(_){if(_.preventDefault(),!o.trim()||!c||!f){alert("Please fill in all fields");return}try{const{error:L}=await Ce.from("price_predictions").insert({token_id:r,predicted_price:parseFloat(c),target_date:new Date(f).toISOString(),nickname:o.trim()});if(L)throw L;d(""),p(""),$()}catch(L){console.error("Error submitting prediction:",L),alert("Failed to submit prediction. Please try again.")}}async function se(_,L,re){try{const U=_==="comment"?"comments":"price_predictions",{error:X}=await Ce.from(U).update({votes:re==="up"?1:-1}).eq("id",L);if(X)throw X;$()}catch(U){console.error("Error voting:",U),alert("Failed to vote. Please try again.")}}return k?u.jsx("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:u.jsx("p",{className:"text-pink-500",children:k})}):u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex gap-2 mb-4",children:u.jsxs("select",{value:h,onChange:_=>v(_.target.value),className:"px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",children:[u.jsx("option",{value:"all",children:"All Time"}),u.jsx("option",{value:"day",children:"Last 24h"}),u.jsx("option",{value:"week",children:"Last Week"}),u.jsx("option",{value:"month",children:"Last Month"})]})}),u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Community Discussion"}),u.jsxs("form",{onSubmit:z,className:"mb-4 space-y-4",children:[u.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",placeholder:"Enter your nickname",maxLength:50}),u.jsx("textarea",{value:i,onChange:_=>a(_.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",placeholder:"Add a comment...",rows:3,maxLength:1e3}),u.jsx("button",{type:"submit",className:"mt-2 px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-colors",children:"Post Comment"})]}),m?u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-20 bg-black/40 rounded-lg"}),u.jsx("div",{className:"h-20 bg-black/40 rounded-lg"})]}):u.jsx("div",{className:"space-y-4",children:e.map(_=>u.jsxs("div",{className:"p-4 bg-black/40 rounded-lg border border-cyan-500/20",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("span",{className:"text-cyan-300",children:_.nickname}),u.jsx("span",{className:"text-cyan-500/60 text-sm",children:new Date(_.created_at).toLocaleDateString()})]}),u.jsx("p",{className:"mt-2 text-cyan-100",children:_.content}),u.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[u.jsx("button",{onClick:()=>se("comment",_.id,"up"),className:"text-cyan-400 hover:text-pink-400",children:u.jsx(Wt,{size:20})}),u.jsx("span",{className:"text-cyan-300",children:_.votes}),u.jsx("button",{onClick:()=>se("comment",_.id,"down"),className:"text-cyan-400 hover:text-pink-400",children:u.jsx(Jt,{size:20})})]})]},_.id))})]}),u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Price Predictions"}),u.jsxs("form",{onSubmit:ue,className:"mb-4 space-y-4",children:[u.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",placeholder:"Enter your nickname",maxLength:50}),u.jsx("input",{type:"number",value:c,onChange:_=>d(_.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",placeholder:"Enter predicted price...",step:"0.000001",min:"0"}),u.jsx("input",{type:"date",value:f,onChange:_=>p(_.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",min:new Date().toISOString().split("T")[0]}),u.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-colors",children:"Submit Prediction"})]}),m?u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-20 bg-black/40 rounded-lg"}),u.jsx("div",{className:"h-20 bg-black/40 rounded-lg"})]}):u.jsx("div",{className:"space-y-4",children:s.map(_=>u.jsxs("div",{className:"p-4 bg-black/40 rounded-lg border border-cyan-500/20",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("span",{className:"text-cyan-300",children:_.nickname}),u.jsx("span",{className:"text-cyan-500/60 text-sm",children:new Date(_.created_at).toLocaleDateString()})]}),u.jsxs("div",{className:"mt-2",children:[u.jsxs("p",{className:"text-cyan-100",children:["Predicted Price: $",_.predicted_price.toFixed(6)]}),u.jsxs("p",{className:"text-cyan-300/60",children:["Target Date: ",new Date(_.target_date).toLocaleDateString()]})]}),u.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[u.jsx("button",{onClick:()=>se("prediction",_.id,"up"),className:"text-cyan-400 hover:text-pink-400",children:u.jsx(Wt,{size:20})}),u.jsx("span",{className:"text-cyan-300",children:_.votes}),u.jsx("button",{onClick:()=>se("prediction",_.id,"down"),className:"text-cyan-400 hover:text-pink-400",children:u.jsx(Jt,{size:20})})]})]},_.id))})]})]})}function Ia({logoUrl:r}){const[e,t]=w.useState([]);return w.useEffect(()=>{const s=()=>Array.from({length:5},(a,o)=>({id:Date.now()+o,x:Math.random()*100,delay:Math.random()*1e3,duration:4e3+Math.random()*2e3,rotation:Math.random()*720-360,scale:.5+Math.random()*1}));t(s());const n=setInterval(()=>{t(i=>[...i,...s()].slice(-15))},2e3);return()=>clearInterval(n)},[]),u.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:e.map(s=>u.jsx("img",{src:r,alt:"Falling Logo",className:"absolute w-8 h-8 rounded-full opacity-50 animate-fall",style:{left:`${s.x}%`,top:"-32px",animationDuration:`${s.duration}ms`,animationDelay:`${s.delay}ms`,transform:`rotate(${s.rotation}deg) scale(${s.scale})`,willChange:"transform"}},s.id))})}wr.register(_r,xr,kr,jr,Cr,Sr,Er,Pr,Tr,$r);function La({tokenId:r,currentPrice:e}){const[t,s]=w.useState([]),[n,i]=w.useState(!0),[a,o]=w.useState(null),l=w.useRef(null),c=w.useCallback(async()=>{try{i(!0),o(null);const m=await Zr("240");s(m)}catch(m){o("Failed to fetch chart data"),console.error("Chart data fetch error:",m)}finally{i(!1)}},[]);w.useEffect(()=>{c();const m=setInterval(c,3e5);return()=>clearInterval(m)},[c]);const d=()=>{l.current&&l.current.zoom(1.1)},f=()=>{l.current&&l.current.zoom(.9)},p=()=>{l.current&&l.current.resetZoom()},h={responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{point:{radius:0,hitRadius:10,hoverRadius:4},line:{tension:0}},scales:{x:{type:"time",time:{unit:"day"},grid:{display:!1},ticks:{maxRotation:0,autoSkip:!0,maxTicksLimit:8}},y:{position:"right",grid:{display:!1},ticks:{callback:m=>`$${Number(m).toFixed(6)}`}},y1:{position:"left",grid:{display:!1},ticks:{callback:m=>`${Number(m).toLocaleString()}`}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1,animation:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",callbacks:{label:m=>{const g=m.parsed.y;return m.dataset.yAxisID==="y1"?`Volume: ${g.toLocaleString()}`:`Price: $${g.toFixed(6)}`}}},zoom:{limits:{x:{min:"original",max:"original"}},pan:{enabled:!0,mode:"x",threshold:10},zoom:{wheel:{enabled:!0,speed:.1},pinch:{enabled:!0},mode:"x"}}}},v={labels:t.map(m=>new Date(m.time)),datasets:[{data:t.map(m=>m.close),borderColor:"#ff00ff",backgroundColor:"transparent",borderWidth:1,fill:!1,yAxisID:"y"},{type:"bar",data:t.map(m=>m.volume),yAxisID:"y1",backgroundColor:"rgba(0, 255, 255, 0.2)",borderColor:"transparent",maxBarThickness:2}]};return u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500",children:"Price Chart (ByBit)"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:d,className:"p-2 rounded-md bg-black/40 text-cyan-300 hover:bg-pink-500/20 transition-colors",title:"Zoom In",children:u.jsx(qr,{size:20})}),u.jsx("button",{onClick:f,className:"p-2 rounded-md bg-black/40 text-cyan-300 hover:bg-pink-500/20 transition-colors",title:"Zoom Out",children:u.jsx(Jr,{size:20})}),u.jsx("button",{onClick:p,className:"p-2 rounded-md bg-black/40 text-cyan-300 hover:bg-pink-500/20 transition-colors",title:"Reset Zoom",children:u.jsx(Fr,{size:20})}),e&&u.jsxs("span",{className:"text-cyan-300 font-mono ml-4",children:["$",e.toFixed(6)]})]})]}),u.jsxs("div",{className:"h-[600px] relative",children:[n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 z-10",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-cyan-500"})}),a?u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40",children:u.jsx("p",{className:"text-pink-500",children:a})}):u.jsx(Ar,{data:v,options:h,ref:l})]})]})}const Da={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},hs=r=>{let e;const t=new Set,s=(d,f)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const h=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(v=>v(e,h))}},n=()=>e,l={setState:s,getState:n,getInitialState:()=>c,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(Da?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},c=e=r(s,n,l);return l},Ma=r=>r?hs(r):hs;var Ws={exports:{}},Zs={},Ks={exports:{}},Gs={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Te=w;function Ua(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Ha=typeof Object.is=="function"?Object.is:Ua,Ba=Te.useState,Va=Te.useEffect,Fa=Te.useLayoutEffect,za=Te.useDebugValue;function qa(r,e){var t=e(),s=Ba({inst:{value:t,getSnapshot:e}}),n=s[0].inst,i=s[1];return Fa(function(){n.value=t,n.getSnapshot=e,kt(n)&&i({inst:n})},[r,t,e]),Va(function(){return kt(n)&&i({inst:n}),r(function(){kt(n)&&i({inst:n})})},[r]),za(t),t}function kt(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Ha(r,t)}catch{return!0}}function Ja(r,e){return e()}var Wa=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ja:qa;Gs.useSyncExternalStore=Te.useSyncExternalStore!==void 0?Te.useSyncExternalStore:Wa;Ks.exports=Gs;var Za=Ks.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ht=w,Ka=Za;function Ga(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Ya=typeof Object.is=="function"?Object.is:Ga,Xa=Ka.useSyncExternalStore,Qa=ht.useRef,eo=ht.useEffect,to=ht.useMemo,so=ht.useDebugValue;Zs.useSyncExternalStoreWithSelector=function(r,e,t,s,n){var i=Qa(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=to(function(){function l(h){if(!c){if(c=!0,d=h,h=s(h),n!==void 0&&a.hasValue){var v=a.value;if(n(v,h))return f=v}return f=h}if(v=f,Ya(d,h))return v;var m=s(h);return n!==void 0&&n(v,m)?(d=h,v):(d=h,f=m)}var c=!1,d,f,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,s,n]);var o=Xa(r,i[0],i[1]);return eo(function(){a.hasValue=!0,a.value=o},[o]),so(o),o};Ws.exports=Zs;var ro=Ws.exports;const no=pr(ro),Ys={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:io}=y,{useSyncExternalStoreWithSelector:ao}=no;let fs=!1;const oo=r=>r;function lo(r,e=oo,t){(Ys?"production":void 0)!=="production"&&t&&!fs&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fs=!0);const s=ao(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return io(s),s}const co=r=>{(Ys?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?Ma(r):r,t=(s,n)=>lo(e,s,n);return Object.assign(t,e),t},uo=r=>co,ho={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function fo(r,e){let t;try{t=r()}catch{return}return{getItem:n=>{var i;const a=l=>l===null?null:JSON.parse(l,void 0),o=(i=t.getItem(n))!=null?i:null;return o instanceof Promise?o.then(a):a(o)},setItem:(n,i)=>t.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>t.removeItem(n)}}const Be=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(s){return Be(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return Be(s)(t)}}}},po=(r,e)=>(t,s,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:g=>g,version:0,merge:(g,k)=>({...k,...g}),...e},a=!1;const o=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return r((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...g)},s,n);const d=Be(i.serialize),f=()=>{const g=i.partialize({...s()});let k;const b=d({state:g,version:i.version}).then(j=>c.setItem(i.name,j)).catch(j=>{k=j});if(k)throw k;return b},p=n.setState;n.setState=(g,k)=>{p(g,k),f()};const h=r((...g)=>{t(...g),f()},s,n);let v;const m=()=>{var g;if(!c)return;a=!1,o.forEach(b=>b(s()));const k=((g=i.onRehydrateStorage)==null?void 0:g.call(i,s()))||void 0;return Be(c.getItem.bind(c))(i.name).then(b=>{if(b)return i.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return i.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var j;return v=i.merge(b,(j=s())!=null?j:h),t(v,!0),f()}).then(()=>{k==null||k(v,void 0),a=!0,l.forEach(b=>b(v))}).catch(b=>{k==null||k(void 0,b)})};return n.persist={setOptions:g=>{i={...i,...g},g.getStorage&&(c=g.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:g=>(o.add(g),()=>{o.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},m(),v||h},mo=(r,e)=>(t,s,n)=>{let i={storage:fo(()=>localStorage),partialize:m=>m,version:0,merge:(m,g)=>({...g,...m}),...e},a=!1;const o=new Set,l=new Set;let c=i.storage;if(!c)return r((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...m)},s,n);const d=()=>{const m=i.partialize({...s()});return c.setItem(i.name,{state:m,version:i.version})},f=n.setState;n.setState=(m,g)=>{f(m,g),d()};const p=r((...m)=>{t(...m),d()},s,n);n.getInitialState=()=>p;let h;const v=()=>{var m,g;if(!c)return;a=!1,o.forEach(b=>{var j;return b((j=s())!=null?j:p)});const k=((g=i.onRehydrateStorage)==null?void 0:g.call(i,(m=s())!=null?m:p))||void 0;return Be(c.getItem.bind(c))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var j;const[I,$]=b;if(h=i.merge($,(j=s())!=null?j:p),t(h,!0),I)return d()}).then(()=>{k==null||k(h,void 0),h=s(),a=!0,l.forEach(b=>b(h))}).catch(b=>{k==null||k(void 0,b)})};return n.persist={setOptions:m=>{i={...i,...m},m.storage&&(c=m.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:m=>(o.add(m),()=>{o.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},i.skipHydration||v(),h||p},go=(r,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((ho?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),po(r,e)):mo(r,e),vo=go,Xs=uo()(vo((r,e)=>({alerts:[],addAlert:t=>{const s={...t,id:crypto.randomUUID(),createdAt:new Date().toISOString(),triggered:!1};r(n=>({alerts:[...n.alerts,s]}))},removeAlert:t=>{r(s=>({alerts:s.alerts.filter(n=>n.id!==t)}))},checkAlerts:(t,s)=>{const n=[];return r(i=>({alerts:i.alerts.map(o=>o.tokenId===t&&!o.triggered&&(o.type==="above"&&s>=o.price||o.type==="below"&&s<=o.price)?(n.push({...o,triggered:!0}),{...o,triggered:!0}):o)})),n},clearTriggeredAlerts:()=>{r(t=>({alerts:t.alerts.filter(s=>!s.triggered)}))}}),{name:"price-alerts"}));function yo({tokenId:r,currentPrice:e}){const[t,s]=w.useState(""),[n,i]=w.useState("above"),{alerts:a,addAlert:o,removeAlert:l}=Xs(),c=a.filter(f=>f.tokenId===r),d=f=>{f.preventDefault();const p=parseFloat(t);!isNaN(p)&&p>0&&(o({tokenId:r,price:p,type:n}),s(""))};return u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsxs("h2",{className:"text-xl font-semibold text-pink-500 mb-4 flex items-center gap-2",children:[u.jsx(Br,{size:20}),"Price Alerts"]}),u.jsxs("form",{onSubmit:d,className:"mb-6 space-y-4",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx("input",{type:"number",value:t,onChange:f=>s(f.target.value),placeholder:"Enter price",step:"0.000001",min:"0",className:"flex-1 px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100 focus:outline-none focus:ring-2 focus:ring-pink-500"}),u.jsxs("select",{value:n,onChange:f=>i(f.target.value),className:"px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100 focus:outline-none focus:ring-2 focus:ring-pink-500",children:[u.jsx("option",{value:"above",children:"Above"}),u.jsx("option",{value:"below",children:"Below"})]})]}),u.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-colors",children:"Add Alert"})]}),c.length>0?u.jsx("div",{className:"space-y-3",children:c.map(f=>u.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${f.triggered?"bg-green-500/20 border-green-500/30":"bg-black/40 border-cyan-500/20"} border`,children:[u.jsxs("div",{children:[u.jsxs("p",{className:"text-cyan-300",children:["Alert when price goes"," ",u.jsx("span",{className:"text-pink-400",children:f.type})," ",u.jsxs("span",{className:"font-mono",children:["$",f.price.toFixed(6)]})]}),u.jsx("p",{className:"text-sm text-cyan-300/60",children:new Date(f.createdAt).toLocaleString()})]}),u.jsx("button",{onClick:()=>l(f.id),className:"p-2 text-cyan-300 hover:text-pink-400 transition-colors",title:"Remove alert",children:u.jsx(zr,{size:20})})]},f.id))}):u.jsx("p",{className:"text-center text-cyan-300/60",children:"No alerts set"})]})}function bo(){var v,m;const{id:r}=mr(),e=gr(),[t,s]=w.useState(null),[n,i]=w.useState(!0),[a,o]=w.useState(null),[l,c]=w.useState(0),d=Xs(g=>g.checkAlerts),f=ys.find(g=>g.id===r),p=(t==null?void 0:t.market_data.current_price.usd)||null;if(w.useEffect(()=>{if(!f){e("/");return}const g=async()=>{if(f.status!=="live"){i(!1);return}try{o(null);const b=await ks();if(b["fuel-network"]){const j=b["fuel-network"].usd;s({market_data:{current_price:{usd:j}}}),f.id&&d(f.id,j).forEach($=>{hn.success(`Price Alert: ${f.name} is ${$.type} $${$.price}`,{description:`Current price: $${j}`,duration:1e4})})}c(0)}catch(b){if(console.error("Error fetching data:",b),o(b instanceof Error?b.message:"Failed to fetch data"),t||s({market_data:{current_price:{usd:.04}}}),l<3){const j=Math.min(1e3*Math.pow(2,l),1e4);setTimeout(()=>{c(I=>I+1)},j)}}finally{i(!1)}};g();const k=setInterval(g,6e4);return()=>clearInterval(k)},[f,e,l,d]),!f)return null;const h=p?et(f,{[f.id]:{usd:p}}):null;return u.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:[u.jsx(xn,{position:"top-right"}),u.jsx(Ia,{logoUrl:f.logo}),u.jsxs(ps,{to:"/",className:"flex items-center gap-2 text-cyan-400 hover:text-pink-400 mb-8",children:[u.jsx(Hr,{size:20}),"Back to Overview"]}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-black/40 rounded-xl p-4 md:p-8 backdrop-blur-sm shadow-xl border border-cyan-500/20",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx("img",{src:f.logo,alt:`${f.name} logo`,className:"w-16 h-16 rounded-full ring-2 ring-cyan-500/20"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:f.name}),u.jsxs("p",{className:"text-pink-400",children:["Sale Date: ",f.date]})]})]}),a&&u.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(bs,{className:"text-pink-500"}),u.jsx("p",{className:"text-pink-500",children:a})]}),u.jsx("p",{className:"text-cyan-300 text-sm",children:"Using last known price data"})]}),n?u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-8 bg-cyan-500/20 rounded w-1/3"}),u.jsx("div",{className:"h-8 bg-cyan-500/20 rounded w-1/2"}),u.jsx("div",{className:"h-8 bg-cyan-500/20 rounded w-2/3"})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.status==="live"&&u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Investment Details"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{children:["Buy Price: ",u.jsxs("span",{className:"text-cyan-300",children:["$",f.buyPrice]})]}),p&&u.jsxs("p",{children:["Current Price: ",u.jsxs("span",{className:"text-cyan-300",children:["$",p.toFixed(6)]})]}),h&&u.jsxs("p",{children:["Current ROI: ",u.jsx("span",{className:h>=100?"text-green-400":"text-pink-500",children:tt(h)})]}),f.unlockPrice&&u.jsxs("p",{children:["Unlock Price: ",u.jsxs("span",{className:"text-cyan-300",children:["$",f.unlockPrice]})]}),f.highestPrice&&u.jsxs("p",{children:["ATH Price: ",u.jsxs("span",{className:"text-cyan-300",children:["$",f.highestPrice]})]})]})]}),u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Links"}),u.jsxs("div",{className:"space-y-2",children:[((v=f.links)==null?void 0:v.website)&&u.jsx("p",{children:u.jsx("a",{href:f.links.website,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-pink-400",children:"Website"})}),((m=f.links)==null?void 0:m.twitter)&&u.jsx("p",{children:u.jsx("a",{href:f.links.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-pink-400",children:"Twitter"})})]})]})]}),f.status==="live"&&u.jsxs(u.Fragment,{children:[u.jsx(La,{tokenId:f.id,currentPrice:p}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx(kn,{currentPrice:p}),u.jsx(yo,{tokenId:f.id,currentPrice:p})]})]}),f.about&&u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsxs("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:["About ",f.name]}),u.jsx("p",{className:"text-cyan-100 leading-relaxed",children:f.about})]})]})]}),f.status==="live"&&u.jsx(u.Fragment,{children:u.jsx(Ra,{tokenId:f.id})})]})]})}function wo(){const[r,e]=w.useState([]),[t,s]=w.useState(!0),n=vr();return w.useEffect(()=>{s(n.pathname==="/")},[n]),w.useEffect(()=>{if(!t)return;const i=()=>Array.from({length:8},(l,c)=>({id:Date.now()+c,x:Math.random()*100,y:-10,rotation:Math.random()*720-360,delay:Math.random()*1e3,tx:Math.random()*200-100,ty:Math.random()*50+100}));e(i());const a=setInterval(()=>{e(o=>[...o,...i()].slice(-20))},2e3);return()=>clearInterval(a)},[t]),t?u.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:r.map(i=>u.jsx("div",{className:"absolute text-3xl animate-float",style:{left:`${i.x}%`,top:`${i.y}%`,animationDelay:`${i.delay}ms`,"--rotation":`${i.rotation}deg`,"--tx":`${i.tx}px`,"--ty":`${i.ty}px`},children:"🌽"},i.id))}):null}function _o(){const[r,e]=w.useState([]),[t,s]=w.useState("initial");return w.useEffect(()=>{const i=Array.from({length:15},(o,l)=>{const c=Math.PI*2*l/15,d=150+Math.random()*100;return{id:l,initialX:0,initialY:0,targetX:Math.cos(c)*d,targetY:Math.sin(c)*d,rotation:Math.random()*720-360,scale:.5+Math.random()*.5,opacity:.6+Math.random()*.4,delay:Math.random()*200}});e(i),(async()=>{await new Promise(o=>setTimeout(o,500)),s("explode"),await new Promise(o=>setTimeout(o,2e3)),s("hidden"),await new Promise(o=>setTimeout(o,500)),s("reassemble")})()},[]),u.jsxs("div",{className:"relative h-[50px] w-[165px] mx-auto",children:[u.jsx("svg",{width:"165",height:"32",viewBox:"0 0 165 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`absolute transition-all duration-1000 ${t==="initial"?"opacity-100 scale-100":"opacity-0 scale-0"}`,children:u.jsx("path",{d:"M4.56043 31.191H0V0.613505H4.55763L4.56043 31.191ZM8.18359 27.2053V31.191H23.2694V27.2053H8.18359ZM136.809 16.0177C136.809 18.1019 136.505 20.1082 135.899 22.0352C135.292 23.9621 134.384 25.6694 133.172 27.1529C131.959 28.6378 130.451 29.8152 128.647 30.6866C127.414 31.2816 126.04 31.6741 124.529 31.8626V27.8585C125.387 27.6871 126.17 27.4065 126.876 27.0183C128.144 26.3212 129.182 25.4002 129.99 24.2526C130.799 23.1049 131.392 21.8141 131.77 20.3817C132.148 18.9478 132.336 17.4927 132.336 16.0191C132.336 14.5456 132.148 13.0905 131.77 11.6552C131.392 10.2213 130.799 8.93053 129.99 7.78428C129.182 6.63662 128.142 5.71565 126.876 5.01855C125.609 4.32145 124.098 3.97432 122.345 3.97432C120.593 3.97432 119.082 4.32287 117.816 5.01855C116.548 5.71565 115.51 6.63662 114.702 7.78428C113.893 8.93195 113.299 10.2213 112.922 11.6552C112.545 13.089 112.356 14.5442 112.356 16.0191C112.356 17.4941 112.545 18.9478 112.922 20.3817C113.3 21.8155 113.893 23.1063 114.702 24.2526C115.51 25.4002 116.548 26.3212 117.816 27.0183C118.522 27.4065 119.306 27.6871 120.163 27.8585V31.8626C118.652 31.6741 117.279 31.2831 116.045 30.6866C114.24 29.8166 112.732 28.6378 111.521 27.1529C110.308 25.668 109.399 23.9621 108.793 22.0352C108.187 20.1082 107.884 18.1019 107.884 16.0177C107.884 13.9335 108.186 11.9272 108.793 10.0003C109.399 8.07332 110.308 6.36741 111.521 4.88253C112.732 3.39765 114.242 2.21315 116.045 1.32761C117.848 0.44348 119.949 0 122.345 0C124.742 0 126.841 0.44348 128.646 1.32761C130.451 2.21315 131.959 3.39765 133.17 4.88253C134.382 6.36741 135.291 8.07332 135.898 10.0003C136.504 11.9272 136.807 13.9335 136.807 16.0177H136.809ZM83.1005 27.2053H92.3613V31.191H83.1005V27.2053ZM92.3627 0.613505H83.1019V4.59916H92.3627V0.613505ZM96.7259 31.191H106.369V27.2053H96.7259V31.191ZM92.3627 4.59916V27.2039H96.7259V4.59916H92.3627ZM96.7259 0.613505V4.59916H106.369V0.613505H96.7259ZM164.5 8.6259V31.2306H159.637L144.645 7.90047V31.2306H140.295V0.653177H144.96L160.149 24.4311V8.6259H164.5ZM164.5 4.63883V0.653177H160.149V4.63883H164.5ZM50.1619 27.2053V31.191H26.8939V17.4601H31.4544L31.4516 27.2039H50.1619V27.2053ZM31.4516 13.4744V4.59916H50.0374V0.613505H26.8939V13.4744H31.4516ZM47.6621 13.4744H31.4474V17.4459H47.6621V13.4744ZM79.2927 17.4898V31.2179H75.1282V28.1872C74.044 29.4284 72.7472 30.3564 71.263 30.9501C69.52 31.6472 67.7392 32 65.9681 32C63.7229 32 61.6847 31.5735 59.9095 30.7319C58.1371 29.8917 56.6109 28.7426 55.3728 27.3172C54.1362 25.8947 53.1822 24.2356 52.5359 22.3865C51.891 20.5432 51.565 18.6021 51.565 16.6142C51.565 14.4081 51.87 12.28 52.4701 10.2879C53.073 8.28585 53.9837 6.50627 55.177 4.99872C56.3745 3.4855 57.8881 2.26416 59.6745 1.36586C61.4651 0.467567 63.5816 0.0127518 65.9681 0.0127518C67.5895 0.0127518 69.1423 0.206863 70.5859 0.589418C72.038 0.974806 73.3558 1.59114 74.5015 2.42143C75.6486 3.25313 76.6334 4.3172 77.4028 5.59805C78.8521 8.00815 79.0563 10.5897 79.0563 10.5897H74.4945C74.4945 10.5897 74.2846 8.95745 73.4173 7.48674C72.9445 6.68479 72.2912 6.04578 71.5554 5.53996C70.814 5.0313 69.9592 4.64308 69.0164 4.38663C68.0651 4.12876 67.0397 3.99841 65.9667 3.99841C64.2321 3.99841 62.7283 4.35262 61.4958 5.04972C60.2578 5.75107 59.2324 6.68762 58.449 7.83104C57.6587 8.98437 57.0669 10.3205 56.692 11.8025C56.3129 13.2945 56.1213 14.8431 56.1213 16.4059C56.1213 17.9687 56.3395 19.4224 56.7703 20.8266C57.1984 22.2236 57.8363 23.4761 58.6659 24.5458C59.4898 25.6113 60.5222 26.4714 61.7351 27.1061C62.9409 27.7381 64.365 28.0583 65.9653 28.0583C67.4636 28.0583 68.8037 27.8117 69.9494 27.3272C71.0909 26.8426 72.066 26.1682 72.848 25.3237C73.6299 24.4764 74.2287 23.469 74.626 22.327C74.8932 21.5591 75.061 20.7331 75.1254 19.8688V17.4913H79.2899L79.2927 17.4898ZM75.1282 13.5014H65.4296V17.4728H75.1282V13.5014Z",fill:"#F03C24",className:"origin-center"})}),r.map(n=>u.jsx("svg",{width:"165",height:"32",viewBox:"0 0 165 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`absolute top-0 left-0 transition-all duration-[2000ms] ease-in-out ${t==="hidden"?"opacity-0":""}`,style:{transform:`translate(${t==="explode"?n.targetX:n.initialX}px, ${t==="explode"?n.targetY:n.initialY}px) rotate(${t==="explode"?n.rotation:0}deg) scale(${t==="explode"?n.scale:1})`,opacity:t==="initial"?0:n.opacity,transitionDelay:`${n.delay}ms`,clipPath:`polygon(${n.id*100/r.length}% 0%, ${(n.id+1)*100/r.length}% 0%, ${(n.id+1)*100/r.length}% 100%, ${n.id*100/r.length}% 100%)`,filter:"drop-shadow(0 0 2px rgba(240, 60, 36, 0.5))"},children:u.jsx("path",{d:"M4.56043 31.191H0V0.613505H4.55763L4.56043 31.191ZM8.18359 27.2053V31.191H23.2694V27.2053H8.18359ZM136.809 16.0177C136.809 18.1019 136.505 20.1082 135.899 22.0352C135.292 23.9621 134.384 25.6694 133.172 27.1529C131.959 28.6378 130.451 29.8152 128.647 30.6866C127.414 31.2816 126.04 31.6741 124.529 31.8626V27.8585C125.387 27.6871 126.17 27.4065 126.876 27.0183C128.144 26.3212 129.182 25.4002 129.99 24.2526C130.799 23.1049 131.392 21.8141 131.77 20.3817C132.148 18.9478 132.336 17.4927 132.336 16.0191C132.336 14.5456 132.148 13.0905 131.77 11.6552C131.392 10.2213 130.799 8.93053 129.99 7.78428C129.182 6.63662 128.142 5.71565 126.876 5.01855C125.609 4.32145 124.098 3.97432 122.345 3.97432C120.593 3.97432 119.082 4.32287 117.816 5.01855C116.548 5.71565 115.51 6.63662 114.702 7.78428C113.893 8.93195 113.299 10.2213 112.922 11.6552C112.545 13.089 112.356 14.5442 112.356 16.0191C112.356 17.4941 112.545 18.9478 112.922 20.3817C113.3 21.8155 113.893 23.1063 114.702 24.2526C115.51 25.4002 116.548 26.3212 117.816 27.0183C118.522 27.4065 119.306 27.6871 120.163 27.8585V31.8626C118.652 31.6741 117.279 31.2831 116.045 30.6866C114.24 29.8166 112.732 28.6378 111.521 27.1529C110.308 25.668 109.399 23.9621 108.793 22.0352C108.187 20.1082 107.884 18.1019 107.884 16.0177C107.884 13.9335 108.186 11.9272 108.793 10.0003C109.399 8.07332 110.308 6.36741 111.521 4.88253C112.732 3.39765 114.242 2.21315 116.045 1.32761C117.848 0.44348 119.949 0 122.345 0C124.742 0 126.841 0.44348 128.646 1.32761C130.451 2.21315 131.959 3.39765 133.17 4.88253C134.382 6.36741 135.291 8.07332 135.898 10.0003C136.504 11.9272 136.807 13.9335 136.807 16.0177H136.809ZM83.1005 27.2053H92.3613V31.191H83.1005V27.2053ZM92.3627 0.613505H83.1019V4.59916H92.3627V0.613505ZM96.7259 31.191H106.369V27.2053H96.7259V31.191ZM92.3627 4.59916V27.2039H96.7259V4.59916H92.3627ZM96.7259 0.613505V4.59916H106.369V0.613505H96.7259ZM164.5 8.6259V31.2306H159.637L144.645 7.90047V31.2306H140.295V0.653177H144.96L160.149 24.4311V8.6259H164.5ZM164.5 4.63883V0.653177H160.149V4.63883H164.5ZM50.1619 27.2053V31.191H26.8939V17.4601H31.4544L31.4516 27.2039H50.1619V27.2053ZM31.4516 13.4744V4.59916H50.0374V0.613505H26.8939V13.4744H31.4516ZM47.6621 13.4744H31.4474V17.4459H47.6621V13.4744ZM79.2927 17.4898V31.2179H75.1282V28.1872C74.044 29.4284 72.7472 30.3564 71.263 30.9501C69.52 31.6472 67.7392 32 65.9681 32C63.7229 32 61.6847 31.5735 59.9095 30.7319C58.1371 29.8917 56.6109 28.7426 55.3728 27.3172C54.1362 25.8947 53.1822 24.2356 52.5359 22.3865C51.891 20.5432 51.565 18.6021 51.565 16.6142C51.565 14.4081 51.87 12.28 52.4701 10.2879C53.073 8.28585 53.9837 6.50627 55.177 4.99872C56.3745 3.4855 57.8881 2.26416 59.6745 1.36586C61.4651 0.467567 63.5816 0.0127518 65.9681 0.0127518C67.5895 0.0127518 69.1423 0.206863 70.5859 0.589418C72.038 0.974806 73.3558 1.59114 74.5015 2.42143C75.6486 3.25313 76.6334 4.3172 77.4028 5.59805C78.8521 8.00815 79.0563 10.5897 79.0563 10.5897H74.4945C74.4945 10.5897 74.2846 8.95745 73.4173 7.48674C72.9445 6.68479 72.2912 6.04578 71.5554 5.53996C70.814 5.0313 69.9592 4.64308 69.0164 4.38663C68.0651 4.12876 67.0397 3.99841 65.9667 3.99841C64.2321 3.99841 62.7283 4.35262 61.4958 5.04972C60.2578 5.75107 59.2324 6.68762 58.449 7.83104C57.6587 8.98437 57.0669 10.3205 56.692 11.8025C56.3129 13.2945 56.1213 14.8431 56.1213 16.4059C56.1213 17.9687 56.3395 19.4224 56.7703 20.8266C57.1984 22.2236 57.8363 23.4761 58.6659 24.5458C59.4898 25.6113 60.5222 26.4714 61.7351 27.1061C62.9409 27.7381 64.365 28.0583 65.9653 28.0583C67.4636 28.0583 68.8037 27.8117 69.9494 27.3272C71.0909 26.8426 72.066 26.1682 72.848 25.3237C73.6299 24.4764 74.2287 23.469 74.626 22.327C74.8932 21.5591 75.061 20.7331 75.1254 19.8688V17.4913H79.2899L79.2927 17.4898ZM75.1282 13.5014H65.4296V17.4728H75.1282V13.5014Z",fill:"#F03C24",className:"origin-center"})},n.id)),u.jsxs("svg",{width:"165",height:"32",viewBox:"0 0 165 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`absolute transition-all duration-1000 ${t==="reassemble"?"opacity-100 scale-100 animate-reassemble":"opacity-0 scale-0"}`,children:[u.jsx("path",{d:"M4.56043 31.191H0V0.613505H4.55763L4.56043 31.191ZM8.18359 27.2053V31.191H23.2694V27.2053H8.18359ZM136.809 16.0177C136.809 18.1019 136.505 20.1082 135.899 22.0352C135.292 23.9621 134.384 25.6694 133.172 27.1529C131.959 28.6378 130.451 29.8152 128.647 30.6866C127.414 31.2816 126.04 31.6741 124.529 31.8626V27.8585C125.387 27.6871 126.17 27.4065 126.876 27.0183C128.144 26.3212 129.182 25.4002 129.99 24.2526C130.799 23.1049 131.392 21.8141 131.77 20.3817C132.148 18.9478 132.336 17.4927 132.336 16.0191C132.336 14.5456 132.148 13.0905 131.77 11.6552C131.392 10.2213 130.799 8.93053 129.99 7.78428C129.182 6.63662 128.142 5.71565 126.876 5.01855C125.609 4.32145 124.098 3.97432 122.345 3.97432C120.593 3.97432 119.082 4.32287 117.816 5.01855C116.548 5.71565 115.51 6.63662 114.702 7.78428C113.893 8.93195 113.299 10.2213 112.922 11.6552C112.545 13.089 112.356 14.5442 112.356 16.0191C112.356 17.4941 112.545 18.9478 112.922 20.3817C113.3 21.8155 113.893 23.1063 114.702 24.2526C115.51 25.4002 116.548 26.3212 117.816 27.0183C118.522 27.4065 119.306 27.6871 120.163 27.8585V31.8626C118.652 31.6741 117.279 31.2831 116.045 30.6866C114.24 29.8166 112.732 28.6378 111.521 27.1529C110.308 25.668 109.399 23.9621 108.793 22.0352C108.187 20.1082 107.884 18.1019 107.884 16.0177C107.884 13.9335 108.186 11.9272 108.793 10.0003C109.399 8.07332 110.308 6.36741 111.521 4.88253C112.732 3.39765 114.242 2.21315 116.045 1.32761C117.848 0.44348 119.949 0 122.345 0C124.742 0 126.841 0.44348 128.646 1.32761C130.451 2.21315 131.959 3.39765 133.17 4.88253C134.382 6.36741 135.291 8.07332 135.898 10.0003C136.504 11.9272 136.807 13.9335 136.807 16.0177H136.809ZM83.1005 27.2053H92.3613V31.191H83.1005V27.2053ZM92.3627 0.613505H83.1019V4.59916H92.3627V0.613505ZM96.7259 31.191H106.369V27.2053H96.7259V31.191ZM92.3627 4.59916V27.2039H96.7259V4.59916H92.3627ZM96.7259 0.613505V4.59916H106.369V0.613505H96.7259ZM164.5 8.6259V31.2306H159.637L144.645 7.90047V31.2306H140.295V0.653177H144.96L160.149 24.4311V8.6259H164.5ZM164.5 4.63883V0.653177H160.149V4.63883H164.5ZM50.1619 27.2053V31.191H26.8939V17.4601H31.4544L31.4516 27.2039H50.1619V27.2053ZM31.4516 13.4744V4.59916H50.0374V0.613505H26.8939V13.4744H31.4516ZM47.6621 13.4744H31.4474V17.4459H47.6621V13.4744ZM79.2927 17.4898V31.2179H75.1282V28.1872C74.044 29.4284 72.7472 30.3564 71.263 30.9501C69.52 31.6472 67.7392 32 65.9681 32C63.7229 32 61.6847 31.5735 59.9095 30.7319C58.1371 29.8917 56.6109 28.7426 55.3728 27.3172C54.1362 25.8947 53.1822 24.2356 52.5359 22.3865C51.891 20.5432 51.565 18.6021 51.565 16.6142C51.565 14.4081 51.87 12.28 52.4701 10.2879C53.073 8.28585 53.9837 6.50627 55.177 4.99872C56.3745 3.4855 57.8881 2.26416 59.6745 1.36586C61.4651 0.467567 63.5816 0.0127518 65.9681 0.0127518C67.5895 0.0127518 69.1423 0.206863 70.5859 0.589418C72.038 0.974806 73.3558 1.59114 74.5015 2.42143C75.6486 3.25313 76.6334 4.3172 77.4028 5.59805C78.8521 8.00815 79.0563 10.5897 79.0563 10.5897H74.4945C74.4945 10.5897 74.2846 8.95745 73.4173 7.48674C72.9445 6.68479 72.2912 6.04578 71.5554 5.53996C70.814 5.0313 69.9592 4.64308 69.0164 4.38663C68.0651 4.12876 67.0397 3.99841 65.9667 3.99841C64.2321 3.99841 62.7283 4.35262 61.4958 5.04972C60.2578 5.75107 59.2324 6.68762 58.449 7.83104C57.6587 8.98437 57.0669 10.3205 56.692 11.8025C56.3129 13.2945 56.1213 14.8431 56.1213 16.4059C56.1213 17.9687 56.3395 19.4224 56.7703 20.8266C57.1984 22.2236 57.8363 23.4761 58.6659 24.5458C59.4898 25.6113 60.5222 26.4714 61.7351 27.1061C62.9409 27.7381 64.365 28.0583 65.9653 28.0583C67.4636 28.0583 68.8037 27.8117 69.9494 27.3272C71.0909 26.8426 72.066 26.1682 72.848 25.3237C73.6299 24.4764 74.2287 23.469 74.626 22.327C74.8932 21.5591 75.061 20.7331 75.1254 19.8688V17.4913H79.2899L79.2927 17.4898ZM75.1282 13.5014H65.4296V17.4728H75.1282V13.5014Z",fill:"#F03C24",className:"origin-center"}),"```"]})]})}function xo(){return u.jsx(yr,{children:u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-black to-blue-900 text-cyan-300",children:[u.jsx(wo,{}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[u.jsxs("header",{className:"text-center mb-12",children:[u.jsx("div",{className:"flex flex-col items-center justify-center gap-4 mb-6",children:u.jsx(_o,{})}),u.jsx("p",{className:"text-cyan-200 max-w-2xl mx-auto border-b border-cyan-500/20 pb-4",children:"Track your ICO investments and monitor their performance in real-time. Stay updated with the latest prices and ROI calculations."})]}),u.jsx("main",{children:u.jsxs(br,{children:[u.jsx(zt,{path:"/",element:u.jsx("div",{className:"bg-black/40 rounded-xl p-6 backdrop-blur-sm shadow-xl border border-cyan-500/20",children:u.jsx(Gr,{})})}),u.jsx(zt,{path:"/token/:id",element:u.jsx(bo,{})})]})}),u.jsx("footer",{className:"mt-12 text-center text-cyan-300/60 text-sm",children:u.jsxs("p",{children:["© ",new Date().getFullYear()," Legion Sales Tracker. All rights reserved. Not affiliated with Legion, not official tracker."]})})]})]})})}vs(document.getElementById("root")).render(u.jsx(w.StrictMode,{children:u.jsx(xo,{})}));
