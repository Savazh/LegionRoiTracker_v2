const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BO14dToN.js","assets/vendor-oc-caUeM.js"])))=>i.map(i=>d[i]);
import{r as v,a as hs,L as gn,R as b,o as fs,b as ps,c as K,g as ms,u as gs,d as ys,e as bs,B as ws,f as vs,h as vt}from"./vendor-oc-caUeM.js";import{C as _s,a as xs,L as ks,P as js,b as Cs,B as Ss,c as Es,T as Ts,p as Ps,d as $s,e as Ns,f as As,g as Os}from"./charts-C3Ub0Xm4.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var yn={exports:{}},it={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rs=v,Is=Symbol.for("react.element"),Ls=Symbol.for("react.fragment"),Ds=Object.prototype.hasOwnProperty,Ms=Rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Us={key:!0,ref:!0,__self:!0,__source:!0};function bn(s,e,t){var n,r={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)Ds.call(e,n)&&!Us.hasOwnProperty(n)&&(r[n]=e[n]);if(s&&s.defaultProps)for(n in e=s.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Is,type:s,key:i,ref:a,props:r,_owner:Ms.current}}it.Fragment=Ls;it.jsx=bn;it.jsxs=bn;yn.exports=it;var u=yn.exports,wn,Zt=hs;wn=Zt.createRoot,Zt.hydrateRoot;const vn=[{id:"fuel-network",name:"Fuel Network",logo:"https://assets.coingecko.com/coins/images/29577/standard/fuel.png?1696528516",date:"2024-12-19",buyPrice:"0.02",unlockPrice:"0.11288",highestPrice:"0.08375",currentPrice:null,roi:null,status:"live",link:"https://crypto-fundraising.info/projects/fuel-network/",about:"Fuel Network is a global, decentralized collective of passionate developers focused on pioneering blockchain scalability. With its innovative technology, Fuel is pushing the boundaries of blockchain performance, enabling faster, more efficient decentralized applications for the next generation of Web3.",links:{website:"https://fuel.network",twitter:"https://x.com/fuel_network"}},{id:"almanak",name:"ALMANAK",logo:"https://pbs.twimg.com/profile_images/1757710046174027776/g6SyLr_q_400x400.jpg",date:"Pending TGE",buyPrice:"--",currentPrice:null,roi:null,status:"pending",link:"https://crypto-fundraising.info/projects/almanak/",about:"Almanak is a Web3 platform revolutionizing DeFi and gaming with AI-driven Financial Agents. It uses agent-based modeling to optimize profitability and security, empowering traders and asset managers to ideate, test, and adapt strategies in real time. Through its intuitive interface and SDK, Almanak makes building, optimizing, and deploying financial strategies seamless and accessible for everyone.",links:{website:"https://almanak.co/",twitter:"https://x.com/Almanak__"}},{id:"pulse",name:"Pulse",logo:"https://pbs.twimg.com/profile_images/1865163275807150080/jov8V4we_400x400.jpg",date:"Pending TGE",buyPrice:"--",currentPrice:null,roi:null,status:"pending",link:"https://crypto-fundraising.info/projects/pulse/",about:"Pulse is an open health network that gives users control over their health data while monetizing it. The platform allows individuals to manage and share personal health information, earning rewards for participation. With exclusive fitness challenges and private communities, Pulse combines data empowerment with gamified experiences to revolutionize personal health management.",links:{website:"https://pulse.site/",twitter:"https://x.com/PulseNoLimits"}},{id:"silencio",name:"Silencio",logo:"https://pbs.twimg.com/profile_images/1829081173676457985/fJ5Rs6dr_400x400.jpg",date:"February 2025",buyPrice:"0.0006",currentPrice:null,roi:null,status:"pending",link:"https://crypto-fundraising.info/projects/silencio/",about:"Silencio is the world's largest citizen science project, tackling noise pollution through a community-powered network. Users contribute hyper-local noise data via a free app, earning rewards and monetizing their data. By creating detailed noise maps, Silencio serves industries like real estate, insurance, and academia while helping to combat noise pollution and enhance global quality of life.",links:{website:"https://www.silencio.network/",twitter:"https://x.com/silencioNetwork"}},{id:"enclave",name:"Enclave",logo:"https://pbs.twimg.com/profile_images/1830688058636726276/GCjCS6ez_400x400.jpg",date:"Pending TGE",buyPrice:"--",currentPrice:null,roi:null,status:"pending",link:"https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExMWZseXZnZnAwcXFpMDcyZ2d1bW1va3pzODN4N3o2anFzYzN4MXVnZCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/20k1punZ5bpmM/giphy.gif",about:"Enclave is a cutting-edge protocol for secure, privacy-preserving computation. By leveraging Encrypted Execution Environments (E3), it enables organizations to process sensitive data—like medical records, financial stats, or even secret ballots—without ever exposing it. Combining advanced cryptography like Fully Homomorphic Encryption (FHE) and Zero-Knowledge Proofs (ZKPs), Enclave empowers industries with unparalleled data privacy, integrity, and verifiable computation. Whether it's safeguarding personal data or enabling new decentralized applications, Enclave is redefining secure data processing for the modern world.",links:{website:"https://www.enclave.gg/",twitter:"https://x.com/EnclaveE3"}},{id:"corn",name:"Corn",logo:"https://pbs.twimg.com/profile_images/1838599679321182208/igqD6b-Q_400x400.jpg",date:"Upcoming ICO",buyPrice:"0.07",currentPrice:null,roi:null,status:"upcoming",link:"https://crypto-fundraising.info/projects/corn/",about:"Corn is an Ethereum layer-2 solution built on Bitcoin, designed to enhance Bitcoin's utility by enabling it to power gas fees in decentralized finance (DeFi) ecosystems. At the heart of Corn is BTCN, a hybrid tokenized Bitcoin backed 1:1 by native BTC. This allows Bitcoin holders to seamlessly use their assets in DeFi without relying on centralized intermediaries. Corn bridges the gap between Ethereum and Bitcoin, unlocking a new frontier of utility for the world's largest cryptocurrency.",links:{website:"https://usecorn.com/",twitter:"https://x.com/use_corn"}}];function tt(s,e){if(s.status!=="live"||!e[s.id])return null;const t=e[s.id].usd,n=parseFloat(s.buyPrice);return(t/n-1)*100}function nt(s){const e=s/100+1;return`${s.toFixed(2)}% (${e.toFixed(2)}x)`}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(s,e)=>{const t=v.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...c},d)=>v.createElement("svg",{ref:d,...Hs,width:r,height:r,stroke:n,strokeWidth:a?Number(i)*24/Number(r):i,className:["lucide",`lucide-${Bs(s)}`,o].join(" "),...c},[...e.map(([f,p])=>v.createElement(f,p)),...Array.isArray(l)?l:[l]]));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=te("ArrowBigDown",[["path",{d:"M15 6v6h4l-7 7-7-7h4V6h6z",key:"1thax2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=te("ArrowBigUp",[["path",{d:"M9 18v-6H5l7-7 7 7h-4v6H9z",key:"1x06kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=te("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=te("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),xn="https://api.bybit.com/v5/market",_t=.04;let Ke=null;const st={},kn=5*60*1e3;async function jn(s,e=5e3){const t=new AbortController,n=setTimeout(()=>t.abort(),e);try{const r=await fetch(s,{headers:{Accept:"application/json","User-Agent":"LegionRoiTracker/1.0"},signal:t.signal,cache:"no-cache"});return clearTimeout(n),r}catch(r){throw clearTimeout(n),r}}async function Cn(){var n,r,i;const s="token-price",e=Date.now(),t=st[s];if(t&&e-t.timestamp<kn)return t.data;try{const a=await jn(`${xn}/tickers?category=spot&symbol=FUELUSDT`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const o=await a.json();if((i=(r=(n=o==null?void 0:o.result)==null?void 0:n.list)==null?void 0:r[0])!=null&&i.lastPrice){const l=parseFloat(o.result.list[0].lastPrice);if(isNaN(l)||l<=0)return console.warn("Invalid price received, using fallback"),{"fuel-network":{usd:Ke??_t}};Ke=l;const c={"fuel-network":{usd:l}};return st[s]={data:c,timestamp:e},c}return console.warn("Invalid response format, using fallback"),{"fuel-network":{usd:Ke??_t}}}catch(a){return console.error("Error fetching price data:",a),{"fuel-network":{usd:Ke??_t}}}}async function Ks(s="240",e=200){var i;const t=`candlestick-${s}`,n=Date.now(),r=st[t];if(r&&n-r.timestamp<kn)return r.data;try{const a=`${xn}/kline?category=spot&symbol=FUELUSDT&interval=${s}&limit=${e}`,o=await jn(a);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();if(!((i=l==null?void 0:l.result)!=null&&i.list))throw new Error("Invalid response format from ByBit");const c=l.result.list.map(d=>({time:new Date(parseInt(d[0])>9999999999?parseInt(d[0]):parseInt(d[0])*1e3).toISOString(),open:parseFloat(d[1]),high:parseFloat(d[2]),low:parseFloat(d[3]),close:parseFloat(d[4]),volume:parseFloat(d[5])})).reverse();return st[t]={data:c,timestamp:n},c}catch(a){throw console.error("Error fetching candlestick data:",a),a}}const Gs={"fuel-network":{usd:.04}};function Ys(){const[s,e]=v.useState(Gs),[t,n]=v.useState(!0),[r,i]=v.useState(null),[a,o]=v.useState(0);v.useEffect(()=>{const c=async()=>{try{i(null);const f=await Cn();e(f),o(0)}catch(f){if(console.error("Error fetching prices:",f),i(f instanceof Error?f.message:"Failed to fetch prices"),a<3){const p=Math.min(1e3*Math.pow(2,a),1e4);setTimeout(()=>{o(h=>h+1)},p)}}finally{n(!1)}};c();const d=setInterval(c,3e4);return()=>clearInterval(d)},[a]);const l=c=>{switch(c){case"live":return"text-green-400";case"pending":return"text-pink-400";case"upcoming":return"text-cyan-400";default:return"text-gray-400"}};return r?u.jsxs("div",{className:"text-center p-4 bg-pink-500/10 rounded-lg border border-pink-500/20",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[u.jsx(_n,{className:"text-pink-500"}),u.jsx("p",{className:"text-pink-500",children:r})]}),u.jsx("p",{className:"text-cyan-300 text-sm",children:"Using last known prices"})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-cyan-500/20",children:[u.jsx("th",{className:"p-4 text-center text-pink-500",children:"Token"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Logo"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Date"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Buy Price"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Current Price"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Current ROI"}),u.jsx("th",{className:"p-4 text-pink-500",children:"Unlock ROI"}),u.jsx("th",{className:"p-4 text-pink-500",children:"ATH ROI"})]})}),u.jsx("tbody",{children:vn.map(c=>{var y;const d=tt(c,s),f=c.status==="live"?(y=s[c.id])==null?void 0:y.usd:null,p=c.unlockPrice?tt(c,{[c.id]:{usd:parseFloat(c.unlockPrice)}}):null,h=c.highestPrice?tt(c,{[c.id]:{usd:parseFloat(c.highestPrice)}}):null;return u.jsxs("tr",{className:"border-b border-cyan-500/20 hover:bg-cyan-500/5 transition-colors",children:[u.jsx("td",{className:"text-center p-4",children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(gn,{to:`/token/${c.id}`,className:"text-cyan-400 hover:text-pink-400 transition-colors",children:c.name}),c.link&&u.jsx("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-pink-400 transition-colors",children:u.jsx(zs,{size:16})})]})}),u.jsx("td",{className:"p-4",children:u.jsx("img",{src:c.logo,alt:`${c.name} logo`,className:"w-8 h-8 rounded-full mx-auto ring-1 ring-cyan-500/20"})}),u.jsx("td",{className:"text-center p-4",children:c.date}),u.jsxs("td",{className:"text-center p-4",children:["$",c.buyPrice]}),u.jsx("td",{className:"text-center p-4",children:c.status==="live"?t?u.jsx("span",{className:"animate-pulse",children:"Loading..."}):f?`$${f.toFixed(6)}`:"N/A":u.jsx("span",{className:l(c.status),children:c.status==="pending"?"Pending TGE":"Upcoming ICO"})}),u.jsx("td",{className:"text-center p-4",children:c.status==="live"?t?u.jsx("span",{className:"animate-pulse",children:"Loading..."}):d?u.jsx("span",{className:d>=100?"text-green-400":"text-pink-500",children:nt(d)}):"N/A":u.jsx("span",{className:l(c.status),children:c.status==="pending"?"Pending TGE":"Upcoming ICO"})}),u.jsx("td",{className:"text-center p-4",children:p&&u.jsx("span",{className:p>=100?"text-green-400":"text-pink-500",children:nt(p)})}),u.jsx("td",{className:"text-center p-4",children:h&&u.jsx("span",{className:"text-green-400",children:nt(h)})})]},c.id)})})]})})}var Xs=s=>{switch(s){case"success":return tr;case"info":return sr;case"warning":return nr;case"error":return rr;default:return null}},Qs=Array(12).fill(0),er=({visible:s,className:e})=>b.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},b.createElement("div",{className:"sonner-spinner"},Qs.map((t,n)=>b.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),tr=b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},b.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),nr=b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},b.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),sr=b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},b.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rr=b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},b.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ir=b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},b.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),b.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ar=()=>{let[s,e]=b.useState(document.hidden);return b.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s},Et=1,or=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let e=this.subscribers.indexOf(s);this.subscribers.splice(e,1)}),this.publish=s=>{this.subscribers.forEach(e=>e(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var e;let{message:t,...n}=s,r=typeof(s==null?void 0:s.id)=="number"||((e=s.id)==null?void 0:e.length)>0?s.id:Et++,i=this.toasts.find(o=>o.id===r),a=s.dismissible===void 0?!0:s.dismissible;return i?this.toasts=this.toasts.map(o=>o.id===r?(this.publish({...o,...s,id:r,title:t}),{...o,...s,id:r,dismissible:a,title:t}):o):this.addToast({title:t,...n,dismissible:a,id:r}),r},this.dismiss=s=>(s||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:s,dismiss:!0})),s),this.message=(s,e)=>this.create({...e,message:s}),this.error=(s,e)=>this.create({...e,message:s,type:"error"}),this.success=(s,e)=>this.create({...e,type:"success",message:s}),this.info=(s,e)=>this.create({...e,type:"info",message:s}),this.warning=(s,e)=>this.create({...e,type:"warning",message:s}),this.loading=(s,e)=>this.create({...e,type:"loading",message:s}),this.promise=(s,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:s,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=s instanceof Promise?s:s(),r=t!==void 0,i,a=n.then(async l=>{if(i=["resolve",l],b.isValidElement(l))r=!1,this.create({id:t,type:"default",message:l});else if(cr(l)&&!l.ok){r=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:c,description:d})}else if(e.success!==void 0){r=!1;let c=typeof e.success=="function"?await e.success(l):e.success,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:c,description:d})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){r=!1;let c=typeof e.error=="function"?await e.error(l):e.error,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:c,description:d})}}).finally(()=>{var l;r&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),o=()=>new Promise((l,c)=>a.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof t!="string"&&typeof t!="number"?{unwrap:o}:Object.assign(t,{unwrap:o})},this.custom=(s,e)=>{let t=(e==null?void 0:e.id)||Et++;return this.create({jsx:s(t),id:t,...e}),t},this.subscribers=[],this.toasts=[]}},Z=new or,lr=(s,e)=>{let t=(e==null?void 0:e.id)||Et++;return Z.addToast({title:s,...e,id:t}),t},cr=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",dr=lr,ur=()=>Z.toasts,hr=Object.assign(dr,{success:Z.success,info:Z.info,warning:Z.warning,error:Z.error,custom:Z.custom,message:Z.message,promise:Z.promise,dismiss:Z.dismiss,loading:Z.loading},{getHistory:ur});function fr(s,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}fr(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ge(s){return s.label!==void 0}var pr=3,mr="32px",Gt=4e3,gr=356,yr=14,br=20,wr=200;function vr(...s){return s.filter(Boolean).join(" ")}var _r=s=>{var e,t,n,r,i,a,o,l,c,d,f;let{invert:p,toast:h,unstyled:y,interacting:g,setHeights:m,visibleToasts:x,heights:w,index:k,toasts:O,expanded:$,removeToast:U,defaultRichColors:ue,closeButton:ne,style:_,cancelButtonStyle:L,actionButtonStyle:se,className:H="",descriptionClassName:X="",duration:B,position:pt,gap:he,loadingIcon:re,expandByDefault:ze,classNames:E,icons:q,closeButtonAriaLabel:mt="Close toast",pauseWhenPageIsHidden:N,cn:T}=s,[R,V]=b.useState(!1),[fe,D]=b.useState(!1),[gt,Ae]=b.useState(!1),[Oe,Re]=b.useState(!1),[es,Ht]=b.useState(!1),[ts,yt]=b.useState(0),[ns,Bt]=b.useState(0),qe=b.useRef(h.duration||B||Gt),Vt=b.useRef(null),we=b.useRef(null),ss=k===0,rs=k+1<=x,W=h.type,ve=h.dismissible!==!1,is=h.className||"",as=h.descriptionClassName||"",Je=b.useMemo(()=>w.findIndex(j=>j.toastId===h.id)||0,[w,h.id]),os=b.useMemo(()=>{var j;return(j=h.closeButton)!=null?j:ne},[h.closeButton,ne]);b.useMemo(()=>h.duration||B||Gt,[h.duration,B]);let bt=b.useRef(0),_e=b.useRef(0),Ft=b.useRef(0),Ze=b.useRef(null),[zt,ls]=pt.split("-"),qt=b.useMemo(()=>w.reduce((j,P,I)=>I>=Je?j:j+P.height,0),[w,Je]),Jt=ar(),cs=h.invert||p,wt=W==="loading";_e.current=b.useMemo(()=>Je*he+qt,[Je,qt]),b.useEffect(()=>{V(!0)},[]),b.useEffect(()=>{let j=we.current;if(j){let P=j.getBoundingClientRect().height;return Bt(P),m(I=>[{toastId:h.id,height:P,position:h.position},...I]),()=>m(I=>I.filter(G=>G.toastId!==h.id))}},[m,h.id]),b.useLayoutEffect(()=>{if(!R)return;let j=we.current,P=j.style.height;j.style.height="auto";let I=j.getBoundingClientRect().height;j.style.height=P,Bt(I),m(G=>G.find(Q=>Q.toastId===h.id)?G.map(Q=>Q.toastId===h.id?{...Q,height:I}:Q):[{toastId:h.id,height:I,position:h.position},...G])},[R,h.title,h.description,m,h.id]);let ae=b.useCallback(()=>{D(!0),yt(_e.current),m(j=>j.filter(P=>P.toastId!==h.id)),setTimeout(()=>{U(h)},wr)},[h,U,m,_e]);b.useEffect(()=>{if(h.promise&&W==="loading"||h.duration===1/0||h.type==="loading")return;let j;return $||g||N&&Jt?(()=>{if(Ft.current<bt.current){let P=new Date().getTime()-bt.current;qe.current=qe.current-P}Ft.current=new Date().getTime()})():qe.current!==1/0&&(bt.current=new Date().getTime(),j=setTimeout(()=>{var P;(P=h.onAutoClose)==null||P.call(h,h),ae()},qe.current)),()=>clearTimeout(j)},[$,g,h,W,N,Jt,ae]),b.useEffect(()=>{h.delete&&ae()},[ae,h.delete]);function ds(){var j,P,I;return q!=null&&q.loading?b.createElement("div",{className:T(E==null?void 0:E.loader,(j=h==null?void 0:h.classNames)==null?void 0:j.loader,"sonner-loader"),"data-visible":W==="loading"},q.loading):re?b.createElement("div",{className:T(E==null?void 0:E.loader,(P=h==null?void 0:h.classNames)==null?void 0:P.loader,"sonner-loader"),"data-visible":W==="loading"},re):b.createElement(er,{className:T(E==null?void 0:E.loader,(I=h==null?void 0:h.classNames)==null?void 0:I.loader),visible:W==="loading"})}return b.createElement("li",{tabIndex:0,ref:we,className:T(H,is,E==null?void 0:E.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,E==null?void 0:E.default,E==null?void 0:E[W],(t=h==null?void 0:h.classNames)==null?void 0:t[W]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:ue,"data-styled":!(h.jsx||h.unstyled||y),"data-mounted":R,"data-promise":!!h.promise,"data-swiped":es,"data-removed":fe,"data-visible":rs,"data-y-position":zt,"data-x-position":ls,"data-index":k,"data-front":ss,"data-swiping":gt,"data-dismissible":ve,"data-type":W,"data-invert":cs,"data-swipe-out":Oe,"data-expanded":!!($||ze&&R),style:{"--index":k,"--toasts-before":k,"--z-index":O.length-k,"--offset":`${fe?ts:_e.current}px`,"--initial-height":ze?"auto":`${ns}px`,..._,...h.style},onPointerDown:j=>{wt||!ve||(Vt.current=new Date,yt(_e.current),j.target.setPointerCapture(j.pointerId),j.target.tagName!=="BUTTON"&&(Ae(!0),Ze.current={x:j.clientX,y:j.clientY}))},onPointerUp:()=>{var j,P,I,G;if(Oe||!ve)return;Ze.current=null;let Q=Number(((j=we.current)==null?void 0:j.style.getPropertyValue("--swipe-amount").replace("px",""))||0),We=new Date().getTime()-((P=Vt.current)==null?void 0:P.getTime()),us=Math.abs(Q)/We;if(Math.abs(Q)>=br||us>.11){yt(_e.current),(I=h.onDismiss)==null||I.call(h,h),ae(),Re(!0),Ht(!1);return}(G=we.current)==null||G.style.setProperty("--swipe-amount","0px"),Ae(!1)},onPointerMove:j=>{var P,I;if(!Ze.current||!ve)return;let G=j.clientY-Ze.current.y,Q=((P=window.getSelection())==null?void 0:P.toString().length)>0,We=zt==="top"?Math.min(0,G):Math.max(0,G);Math.abs(We)>0&&Ht(!0),!Q&&((I=we.current)==null||I.style.setProperty("--swipe-amount",`${We}px`))}},os&&!h.jsx?b.createElement("button",{"aria-label":mt,"data-disabled":wt,"data-close-button":!0,onClick:wt||!ve?()=>{}:()=>{var j;ae(),(j=h.onDismiss)==null||j.call(h,h)},className:T(E==null?void 0:E.closeButton,(r=h==null?void 0:h.classNames)==null?void 0:r.closeButton)},(i=q==null?void 0:q.close)!=null?i:ir):null,h.jsx||b.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:b.createElement(b.Fragment,null,W||h.icon||h.promise?b.createElement("div",{"data-icon":"",className:T(E==null?void 0:E.icon,(a=h==null?void 0:h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||ds():null,h.type!=="loading"?h.icon||(q==null?void 0:q[W])||Xs(W):null):null,b.createElement("div",{"data-content":"",className:T(E==null?void 0:E.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},b.createElement("div",{"data-title":"",className:T(E==null?void 0:E.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},typeof h.title=="function"?h.title():h.title),h.description?b.createElement("div",{"data-description":"",className:T(X,as,E==null?void 0:E.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),b.isValidElement(h.cancel)?h.cancel:h.cancel&&Ge(h.cancel)?b.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||L,onClick:j=>{var P,I;Ge(h.cancel)&&ve&&((I=(P=h.cancel).onClick)==null||I.call(P,j),ae())},className:T(E==null?void 0:E.cancelButton,(d=h==null?void 0:h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,b.isValidElement(h.action)?h.action:h.action&&Ge(h.action)?b.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||se,onClick:j=>{var P,I;Ge(h.action)&&((I=(P=h.action).onClick)==null||I.call(P,j),!j.defaultPrevented&&ae())},className:T(E==null?void 0:E.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function Yt(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}var xr=v.forwardRef(function(s,e){let{invert:t,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:a,className:o,offset:l,theme:c="light",richColors:d,duration:f,style:p,visibleToasts:h=pr,toastOptions:y,dir:g=Yt(),gap:m=yr,loadingIcon:x,icons:w,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:O,cn:$=vr}=s,[U,ue]=b.useState([]),ne=b.useMemo(()=>Array.from(new Set([n].concat(U.filter(N=>N.position).map(N=>N.position)))),[U,n]),[_,L]=b.useState([]),[se,H]=b.useState(!1),[X,B]=b.useState(!1),[pt,he]=b.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),re=b.useRef(null),ze=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=b.useRef(null),q=b.useRef(!1),mt=b.useCallback(N=>{ue(T=>{var R;return(R=T.find(V=>V.id===N.id))!=null&&R.delete||Z.dismiss(N.id),T.filter(({id:V})=>V!==N.id)})},[]);return b.useEffect(()=>Z.subscribe(N=>{if(N.dismiss){ue(T=>T.map(R=>R.id===N.id?{...R,delete:!0}:R));return}setTimeout(()=>{fs.flushSync(()=>{ue(T=>{let R=T.findIndex(V=>V.id===N.id);return R!==-1?[...T.slice(0,R),{...T[R],...N},...T.slice(R+1)]:[N,...T]})})})}),[]),b.useEffect(()=>{if(c!=="system"){he(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?he("dark"):he("light")),typeof window>"u")return;let N=window.matchMedia("(prefers-color-scheme: dark)");try{N.addEventListener("change",({matches:T})=>{he(T?"dark":"light")})}catch{N.addListener(({matches:R})=>{try{he(R?"dark":"light")}catch(V){console.error(V)}})}},[c]),b.useEffect(()=>{U.length<=1&&H(!1)},[U]),b.useEffect(()=>{let N=T=>{var R,V;r.every(fe=>T[fe]||T.code===fe)&&(H(!0),(R=re.current)==null||R.focus()),T.code==="Escape"&&(document.activeElement===re.current||(V=re.current)!=null&&V.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[r]),b.useEffect(()=>{if(re.current)return()=>{E.current&&(E.current.focus({preventScroll:!0}),E.current=null,q.current=!1)}},[re.current]),b.createElement("section",{"aria-label":`${k} ${ze}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"},ne.map((N,T)=>{var R;let[V,fe]=N.split("-");return U.length?b.createElement("ol",{key:N,dir:g==="auto"?Yt():g,tabIndex:-1,ref:re,className:o,"data-sonner-toaster":!0,"data-theme":pt,"data-y-position":V,"data-lifted":se&&U.length>1&&!i,"data-x-position":fe,style:{"--front-toast-height":`${((R=_[0])==null?void 0:R.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||mr,"--width":`${gr}px`,"--gap":`${m}px`,...p},onBlur:D=>{q.current&&!D.currentTarget.contains(D.relatedTarget)&&(q.current=!1,E.current&&(E.current.focus({preventScroll:!0}),E.current=null))},onFocus:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||q.current||(q.current=!0,E.current=D.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{X||H(!1)},onPointerDown:D=>{D.target instanceof HTMLElement&&D.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},U.filter(D=>!D.position&&T===0||D.position===N).map((D,gt)=>{var Ae,Oe;return b.createElement(_r,{key:D.id,icons:w,index:gt,toast:D,defaultRichColors:d,duration:(Ae=y==null?void 0:y.duration)!=null?Ae:f,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:t,visibleToasts:h,closeButton:(Oe=y==null?void 0:y.closeButton)!=null?Oe:a,interacting:X,position:N,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:mt,toasts:U.filter(Re=>Re.position==D.position),heights:_.filter(Re=>Re.position==D.position),setHeights:L,expandByDefault:i,gap:m,loadingIcon:x,expanded:se,pauseWhenPageIsHidden:O,cn:$})})):null}))});function kr({currentPrice:s}){const[e,t]=v.useState(""),[n,r]=v.useState("0.02"),[i,a]=v.useState(null);return v.useEffect(()=>{if(s&&e&&n){const o=parseFloat(e),l=parseFloat(n);if(o>0&&l>0){const c=o/l,d=c*s,f=d-o,p=f/o*100;a({currentValue:d,gainLoss:f,gainLossPercentage:p,tokens:c})}}},[e,n,s]),u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Investment Calculator"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-cyan-300 mb-1",children:"Investment Amount ($)"}),u.jsx("input",{type:"number",value:e,onChange:o=>t(o.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100 focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Enter investment amount",min:"0",step:"0.01"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-cyan-300 mb-1",children:"Purchase Price ($)"}),u.jsx("input",{type:"number",value:n,onChange:o=>r(o.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100 focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Enter purchase price",min:"0",step:"0.000001"})]}),i&&s&&u.jsxs("div",{className:"mt-6 space-y-2 p-4 bg-black/40 rounded-lg border border-cyan-500/20",children:[u.jsxs("p",{className:"text-cyan-300",children:["Tokens: ",u.jsx("span",{className:"text-pink-400",children:i.tokens.toLocaleString(void 0,{maximumFractionDigits:2})})]}),u.jsxs("p",{className:"text-cyan-300",children:["Current Value: ",u.jsxs("span",{className:"text-pink-400",children:["$",i.currentValue.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),u.jsxs("p",{className:"text-cyan-300",children:["Gain/Loss:"," ",u.jsxs("span",{className:i.gainLoss>=0?"text-green-400":"text-red-400",children:["$",Math.abs(i.gainLoss).toLocaleString(void 0,{maximumFractionDigits:2})," ","(",i.gainLoss>=0?"+":"-",Math.abs(i.gainLossPercentage).toFixed(2),"%)"]})]})]})]})]})}const jr="modulepreload",Cr=function(s){return"/"+s},Xt={},Ee=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=Cr(l),l in Xt)return;Xt[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":jr,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Sr=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Ee(async()=>{const{default:n}=await Promise.resolve().then(()=>$e);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class It extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Er extends It{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Tr extends It{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Pr extends It{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Tt;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Tt||(Tt={}));var $r=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):r(d.value).then(o,l)}c((n=n.apply(s,e||[])).next())})};class Nr{constructor(e,{headers:t={},customFetch:n,region:r=Tt.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Sr(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return $r(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let c;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:c}).catch(y=>{throw new Er(y)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new Tr(d);if(!d.ok)throw new Pr(d);let p=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return p==="application/json"?h=yield d.json():p==="application/octet-stream"?h=yield d.blob():p==="text/event-stream"?h=d:p==="multipart/form-data"?h=yield d.formData():h=yield d.text(),{data:h,error:null}}catch(r){return{data:null,error:r}}})}}var z={},Lt={},at={},Ve={},ot={},lt={},Ar=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Te=Ar();const Or=Te.fetch,Sn=Te.fetch.bind(Te),En=Te.Headers,Rr=Te.Request,Ir=Te.Response,$e=Object.freeze(Object.defineProperty({__proto__:null,Headers:En,Request:Rr,Response:Ir,default:Sn,fetch:Or},Symbol.toStringTag,{value:"Module"})),Lr=ps($e);var ct={};Object.defineProperty(ct,"__esModule",{value:!0});let Dr=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ct.default=Dr;var Tn=K&&K.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(lt,"__esModule",{value:!0});const Mr=Tn(Lr),Ur=Tn(ct);let Hr=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Mr.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let c=null,d=null,f=null,p=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=x:d=JSON.parse(x))}const g=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),m=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&m&&m.length>1&&(f=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,p=406,h="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const g=await i.text();try{c=JSON.parse(g),Array.isArray(c)&&i.status===404&&(d=[],c=null,p=200,h="OK")}catch{i.status===404&&g===""?(p=204,h="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,p=200,h="OK"),c&&this.shouldThrowOnError)throw new Ur.default(c)}return{error:c,data:d,count:f,status:p,statusText:h}});return this.shouldThrowOnError||(r=r.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}};lt.default=Hr;var Br=K&&K.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ot,"__esModule",{value:!0});const Vr=Br(lt);let Fr=class extends Vr.default{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ot.default=Fr;var zr=K&&K.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ve,"__esModule",{value:!0});const qr=zr(ot);let Jr=class extends qr.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Ve.default=Jr;var Zr=K&&K.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(at,"__esModule",{value:!0});const Ie=Zr(Ve);let Wr=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Ie.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Ie.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ie.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new Ie.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ie.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};at.default=Wr;var dt={},ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.version=void 0;ut.version="0.0.0-automated";Object.defineProperty(dt,"__esModule",{value:!0});dt.DEFAULT_HEADERS=void 0;const Kr=ut;dt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Kr.version}`};var Pn=K&&K.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Lt,"__esModule",{value:!0});const Gr=Pn(at),Yr=Pn(Ve),Xr=dt;let Qr=class $n{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Xr.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Gr.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;n||r?(a=n?"HEAD":"GET",Object.entries(t).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{o.searchParams.append(d,f)})):(a="POST",l=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Yr.default({method:a,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Lt.default=Qr;var Ne=K&&K.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(z,"__esModule",{value:!0});z.PostgrestError=z.PostgrestBuilder=z.PostgrestTransformBuilder=z.PostgrestFilterBuilder=z.PostgrestQueryBuilder=z.PostgrestClient=void 0;const Nn=Ne(Lt);z.PostgrestClient=Nn.default;const An=Ne(at);z.PostgrestQueryBuilder=An.default;const On=Ne(Ve);z.PostgrestFilterBuilder=On.default;const Rn=Ne(ot);z.PostgrestTransformBuilder=Rn.default;const In=Ne(lt);z.PostgrestBuilder=In.default;const Ln=Ne(ct);z.PostgrestError=Ln.default;var ei=z.default={PostgrestClient:Nn.default,PostgrestQueryBuilder:An.default,PostgrestFilterBuilder:On.default,PostgrestTransformBuilder:Rn.default,PostgrestBuilder:In.default,PostgrestError:Ln.default};const{PostgrestClient:ti,PostgrestQueryBuilder:Po,PostgrestFilterBuilder:$o,PostgrestTransformBuilder:No,PostgrestBuilder:Ao,PostgrestError:Oo}=ei,ni="2.11.2",si={"X-Client-Info":`realtime-js/${ni}`},ri="1.0.0",Dn=1e4,ii=1e3;var Se;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Se||(Se={}));var J;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(J||(J={}));var Y;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Y||(Y={}));var Pt;(function(s){s.websocket="websocket"})(Pt||(Pt={}));var ge;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(ge||(ge={}));class ai{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+r));a=a+r;const l=n.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class Mn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var A;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(A||(A={}));const Qt=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=oi(a,s,e,r),i),{})},oi=(s,e,t,n)=>{const r=e.find(o=>o.name===s),i=r==null?void 0:r.type,a=t[s];return i&&!n.includes(i)?Un(i,a):$t(a)},Un=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return ui(e,t)}switch(s){case A.bool:return li(e);case A.float4:case A.float8:case A.int2:case A.int4:case A.int8:case A.numeric:case A.oid:return ci(e);case A.json:case A.jsonb:return di(e);case A.timestamp:return hi(e);case A.abstime:case A.date:case A.daterange:case A.int4range:case A.int8range:case A.money:case A.reltime:case A.text:case A.time:case A.timestamptz:case A.timetz:case A.tsrange:case A.tstzrange:return $t(e);default:return $t(e)}},$t=s=>s,li=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},ci=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},di=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},ui=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const a=s.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Un(e,o))}return s},hi=s=>typeof s=="string"?s.replace(" ","T"):s,Hn=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class xt{constructor(e,t,n={},r=Dn){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var en;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(en||(en={}));class Me{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Me.syncState(this.state,r,i,a),this.pendingDiffs.forEach(l=>{this.state=Me.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Me.syncDiff(this.state,r,i,a),o())}),this.onJoin((r,i,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:a})}),this.onLeave((r,i,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(c,d)=>{a[c]||(l[c]=d)}),this.map(a,(c,d)=>{const f=i[c];if(f){const p=d.map(m=>m.presence_ref),h=f.map(m=>m.presence_ref),y=d.filter(m=>h.indexOf(m.presence_ref)<0),g=f.filter(m=>p.indexOf(m.presence_ref)<0);y.length>0&&(o[c]=y),g.length>0&&(l[c]=g)}else o[c]=d}),this.syncDiff(i,{joins:o,leaves:l},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(o,l)=>{var c;const d=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),d.length>0){const f=e[o].map(h=>h.presence_ref),p=d.filter(h=>f.indexOf(h.presence_ref)<0);e[o].unshift(...p)}n(o,d,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const d=l.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=c,r(o,c,l),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tn;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(tn||(tn={}));var nn;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(nn||(nn={}));var ie;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(ie||(ie={}));class Dt{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=J.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new xt(this,Y.join,this.params,this.timeout),this.rejoinTimer=new Mn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=J.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=J.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=J.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=J.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Y.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Me(this),this.broadcastEndpointURL=Hn(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(d=>e==null?void 0:e(ie.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(ie.CLOSED));const l={},c={broadcast:i,presence:a,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&r!==void 0?r:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(ie.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,h=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,y=[];for(let g=0;g<h;g++){const m=p[g],{filter:{event:x,schema:w,table:k,filter:O}}=m,$=d&&d[g];if($&&$.event===x&&$.schema===w&&$.table===k&&$.filter===O)y.push(Object.assign(Object.assign({},m),{id:$.id}));else{this.unsubscribe(),e==null||e(ie.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(ie.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(ie.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ie.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=J.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Y.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new xt(this,Y.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new xt(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:d}=Y;if(n&&[o,l,c,d].indexOf(a)>=0&&n!==this._joinRef())return;let p=this._onMessage(a,t,n);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(h=>{var y,g,m;return((y=h.filter)===null||y===void 0?void 0:y.event)==="*"||((m=(g=h.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===a}).map(h=>h.callback(p,n)):(i=this.bindings[a])===null||i===void 0||i.filter(h=>{var y,g,m,x,w,k;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in h){const O=h.id,$=(y=h.filter)===null||y===void 0?void 0:y.event;return O&&((g=t.ids)===null||g===void 0?void 0:g.includes(O))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const O=(w=(x=h==null?void 0:h.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return O==="*"||O===((k=t==null?void 0:t.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===a}).map(h=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:g,table:m,commit_timestamp:x,type:w,errors:k}=y;p=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:x,eventType:w,new:{},old:{},errors:k}),this._getPayloadRecords(y))}h.callback(p,n)})}_isClosed(){return this.state===J.closed}_isJoined(){return this.state===J.joined}_isJoining(){return this.state===J.joining}_isLeaving(){return this.state===J.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Dt.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Y.close,{},e)}_onError(e){this._on(Y.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=J.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Qt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Qt(e.columns,e.old_record)),t}}const fi=()=>{},pi=typeof WebSocket<"u",mi=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gi{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=si,this.params={},this.timeout=Dn,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=fi,this.conn=null,this.sendBuffer=[],this.serializer=new ai,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Ee(async()=>{const{default:l}=await Promise.resolve().then(()=>$e);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${Pt.websocket}`,this.httpEndpoint=Hn(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Mn(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(pi){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new yi(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Ee(async()=>{const{default:e}=await import("./browser-BO14dToN.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ri}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Se.connecting:return ge.Connecting;case Se.open:return ge.Open;case Se.closing:return ge.Closing;default:return ge.Closed}}isConnected(){return this.connectionState()===ge.Open}channel(e,t={config:{}}){const n=new Dt(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t}),r.joinedOnce&&r._isJoined()&&r._push(Y.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ii,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:r,payload:i,ref:a}=t;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(r,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Y.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([mi],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class yi{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Se.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Mt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function M(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class bi extends Mt{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Nt extends Mt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var wi=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):r(d.value).then(o,l)}c((n=n.apply(s,e||[])).next())})};const Bn=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Ee(async()=>{const{default:n}=await Promise.resolve().then(()=>$e);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},vi=()=>wi(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ee(()=>Promise.resolve().then(()=>$e),void 0)).Response:Response}),At=s=>{if(Array.isArray(s))return s.map(t=>At(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=At(n)}),e};var ye=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):r(d.value).then(o,l)}c((n=n.apply(s,e||[])).next())})};const kt=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),_i=(s,e,t)=>ye(void 0,void 0,void 0,function*(){const n=yield vi();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(r=>{e(new bi(kt(r),s.status||500))}).catch(r=>{e(new Nt(kt(r),r))}):e(new Nt(kt(s),s))}),xi=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),t))};function Fe(s,e,t,n,r,i){return ye(this,void 0,void 0,function*(){return new Promise((a,o)=>{s(t,xi(e,n,r,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>_i(l,o,n))})})}function rt(s,e,t,n){return ye(this,void 0,void 0,function*(){return Fe(s,"GET",e,t,n)})}function ce(s,e,t,n,r){return ye(this,void 0,void 0,function*(){return Fe(s,"POST",e,n,r,t)})}function ki(s,e,t,n,r){return ye(this,void 0,void 0,function*(){return Fe(s,"PUT",e,n,r,t)})}function ji(s,e,t,n){return ye(this,void 0,void 0,function*(){return Fe(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Vn(s,e,t,n,r){return ye(this,void 0,void 0,function*(){return Fe(s,"DELETE",e,n,r,t)})}var F=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):r(d.value).then(o,l)}c((n=n.apply(s,e||[])).next())})};const Ci={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Si{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Bn(r)}uploadOrUpdate(e,t,n,r){return F(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},sn),r);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(o=Object.assign(Object.assign({},o),r.headers));const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),p=yield f.json();return f.ok?{data:{path:c,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(M(i))return{data:null,error:i};throw i}})}upload(e,t,n){return F(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return F(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:sn.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:d}),p=yield f.json();return f.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(M(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return F(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield ce(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Mt("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}})}update(e,t,n){return F(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return F(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}})}copy(e,t,n){return F(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return F(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ce(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return F(this,void 0,void 0,function*(){try{const r=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}})}download(e,t){return F(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield rt(this.fetch,`${this.url}/${r}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(M(o))return{data:null,error:o};throw o}})}info(e){return F(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield rt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:At(n),error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}})}exists(e){return F(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield ji(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(M(n)&&n instanceof Nt){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}remove(e){return F(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}})}list(e,t,n){return F(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Ci),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ei="2.7.1",Ti={"X-Client-Info":`storage-js/${Ei}`};var xe=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):r(d.value).then(o,l)}c((n=n.apply(s,e||[])).next())})};class Pi{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Ti),t),this.fetch=Bn(n)}listBuckets(){return xe(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(M(e))return{data:null,error:e};throw e}})}getBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return xe(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return xe(this,void 0,void 0,function*(){try{return{data:yield ki(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}})}emptyBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}})}}class $i extends Pi{constructor(e,t={},n){super(e,t,n)}from(e){return new Si(this.url,this.headers,e,this.fetch)}}const Ni="2.47.12";let De="";typeof Deno<"u"?De="deno":typeof document<"u"?De="web":typeof navigator<"u"&&navigator.product==="ReactNative"?De="react-native":De="node";const Ai={"X-Client-Info":`supabase-js-${De}/${Ni}`},Oi={headers:Ai},Ri={schema:"public"},Ii={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Li={};var Di=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):r(d.value).then(o,l)}c((n=n.apply(s,e||[])).next())})};const Mi=s=>{let e;return s?e=s:typeof fetch>"u"?e=Sn:e=fetch,(...t)=>e(...t)},Ui=()=>typeof Headers>"u"?En:Headers,Hi=(s,e,t)=>{const n=Mi(t),r=Ui();return(i,a)=>Di(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:s;let c=new r(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},a),{headers:c}))})};var Bi=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):r(d.value).then(o,l)}c((n=n.apply(s,e||[])).next())})};function Vi(s){return s.replace(/\/$/,"")}function Fi(s,e){const{db:t,auth:n,realtime:r,global:i}=s,{db:a,auth:o,realtime:l,global:c}=e,d={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),i),accessToken:()=>Bi(this,void 0,void 0,function*(){return""})};return s.accessToken?d.accessToken=s.accessToken:delete d.accessToken,d}const Fn="2.67.3",zi="http://localhost:9999",qi="supabase.auth.token",Ji={"X-Client-Info":`gotrue-js/${Fn}`},rn=10,Ot="X-Supabase-Api-Version",zn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Zi(s){return Math.round(Date.now()/1e3)+s}function Wi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const ee=()=>typeof window<"u"&&typeof document<"u",pe={tested:!1,writable:!1},Ue=()=>{if(!ee())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pe.tested)return pe.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),pe.tested=!0,pe.writable=!0}catch{pe.tested=!0,pe.writable=!1}return pe.writable};function Ki(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const qn=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Ee(async()=>{const{default:n}=await Promise.resolve().then(()=>$e);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Gi=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Jn=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Ye=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Xe=async(s,e)=>{await s.removeItem(e)};function Yi(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,r,i,a,o,l,c,d=0;for(s=s.replace("-","+").replace("_","/");d<s.length;)a=e.indexOf(s.charAt(d++)),o=e.indexOf(s.charAt(d++)),l=e.indexOf(s.charAt(d++)),c=e.indexOf(s.charAt(d++)),n=a<<2|o>>4,r=(o&15)<<4|l>>2,i=(l&3)<<6|c,t=t+String.fromCharCode(n),l!=64&&r!=0&&(t=t+String.fromCharCode(r)),c!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class ht{constructor(){this.promise=new ht.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ht.promiseConstructor=Promise;function an(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(Yi(n))}async function Xi(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function Qi(s,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await s(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){r(a);return}}})()})}function ea(s){return("0"+s.toString(16)).substr(-2)}function ta(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,ea).join("")}async function na(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function sa(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ra(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await na(s);return sa(t)}async function ke(s,e,t=!1){const n=ta();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await Jn(s,`${e}-code-verifier`,r);const i=await ra(n);return[i,n===i?"plain":"s256"]}const ia=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aa(s){const e=s.headers.get(Ot);if(!e||!e.match(ia))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Ut extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function C(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class oa extends Ut{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function la(s){return C(s)&&s.name==="AuthApiError"}class Zn extends Ut{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class be extends Ut{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class oe extends be{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ca(s){return C(s)&&s.name==="AuthSessionMissingError"}class jt extends be{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qe extends be{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class et extends be{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function da(s){return C(s)&&s.name==="AuthImplicitGrantRedirectError"}class on extends be{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rt extends be{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ct(s){return C(s)&&s.name==="AuthRetryableFetchError"}class ln extends be{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var ua=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};const me=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),ha=[502,503,504];async function cn(s){var e;if(!Gi(s))throw new Rt(me(s),0);if(ha.includes(s.status))throw new Rt(me(s),s.status);let t;try{t=await s.json()}catch(i){throw new Zn(me(i),i)}let n;const r=aa(s);if(r&&r.getTime()>=zn["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new ln(me(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new oe}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new ln(me(t),s.status,t.weak_password.reasons);throw new oa(me(t),s.status||500,n)}const fa=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function S(s,e,t,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[Ot]||(i[Ot]=zn["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await pa(s,e,t+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function pa(s,e,t,n,r,i){const a=fa(e,n,r,i);let o;try{o=await s(t,Object.assign({},a))}catch(l){throw console.error(l),new Rt(me(l),0)}if(o.ok||await cn(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await cn(l)}}function le(s){var e;let t=null;ba(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=Zi(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function dn(s){const e=le(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function de(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function ma(s){return{data:s,error:null}}function ga(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,a=ua(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function ya(s){return s}function ba(s){return s.access_token&&s.refresh_token&&s.expires_in}var wa=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};class va{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=qn(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await S(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(C(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await S(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:de})}catch(n){if(C(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=wa(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await S(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ga,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(C(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await S(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:de})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await S(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:ya});if(d.error)throw d.error;const f=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,h=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(y.split(";")[1].split("=")[1]);c[`${m}Page`]=g}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(C(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await S(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:de})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await S(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:de})}catch(n){if(C(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await S(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:de})}catch(n){if(C(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await S(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(C(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await S(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}}const _a={getItem:s=>Ue()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{Ue()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{Ue()&&globalThis.localStorage.removeItem(s)}};function un(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function xa(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const je={debug:!!(globalThis&&Ue()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ka extends Wn{}async function ja(s,e,t){je.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),je.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){je.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await t()}finally{je.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw je.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new ka(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(je.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}xa();const Ca={url:zi,storageKey:qi,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ji,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Le=30*1e3,hn=3;async function fn(s,e,t){return await t()}class He{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=He.nextInstanceID,He.nextInstanceID+=1,this.instanceID>0&&ee()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ca),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new va({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=qn(r.fetch),this.lock=r.lock||fn,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:ee()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ja:this.lock=fn,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Ue()?this.storage=_a:(this.memoryStorage={},this.storage=un(this.memoryStorage)):(this.memoryStorage={},this.storage=un(this.memoryStorage)),ee()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Fn}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Ki(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),ee()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),da(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return C(t)?{error:t}:{error:new Zn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:le}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:d,password:f,options:p}=e;let h=null,y=null;this.flowType==="pkce"&&([h,y]=await ke(this.storage,this.storageKey)),i=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:y},xform:le})}else if("phone"in e){const{phone:d,password:f,options:p}=e;i=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(r=p==null?void 0:p.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:le})}else throw new Qe("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:dn})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:dn})}else throw new Qe("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new jt}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Ye(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:i,error:a}=await S(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:le});if(await Xe(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new jt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:a})}catch(i){if(C(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:a}=e,o=await S(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:le}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new jt}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await ke(this.storage,this.storageKey));const{error:f}=await S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:d}=await S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Qe("You must provide either an email or phone number.")}catch(o){if(C(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await S(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:le});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(C(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await ke(this.storage,this.storageKey)),await S(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:ma})}catch(i){if(C(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new oe;const{error:r}=await S(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(C(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:a}=await S(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:a,error:o}=await S(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Qe("You must provide either an email or phone number and a type")}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ye(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:de}):await this._useSession(async t=>{var n,r,i;const{data:a,error:o}=t;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new oe}:await S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:de})})}catch(t){if(C(t))return ca(t)&&(await this._removeSession(),await Xe(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new oe;const a=r.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await ke(this.storage,this.storageKey));const{data:c,error:d}=await S(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:de});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(C(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return an(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new oe;const t=Date.now()/1e3;let n=t,r=!0,i=null;const a=an(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(C(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new oe;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ee())throw new et("No browser detected.");if(e.error||e.error_description||e.error_code)throw new et(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new on("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new et("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new on("No code detected.");const{data:w,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!i||!o||!a||!c)throw new et("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let p=d+f;l&&(p=parseInt(l));const h=p-d;h*1e3<=Le&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const y=p-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,d);const{data:g,error:m}=await this._getUser(i);if(m)throw m;const x={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:f,expires_at:p,refresh_token:a,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(C(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ye(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const a=(n=r.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(la(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Xe(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Wi(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:i},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await ke(this.storage,this.storageKey,!0));try{return await S(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(C(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async i=>{var a,o,l,c,d;const{data:f,error:p}=i;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await S(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return ee()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(C(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)throw a;return await S(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await Qi(async r=>(r>0&&await Xi(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await S(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:le})),(r,i)=>{const a=200*Math.pow(2,r);return i&&Ct(i)&&Date.now()+a-n<Le})}catch(n){if(this._debug(t,"error",n),C(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),ee()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Ye(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<r+rn;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${rn}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Ct(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new oe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ht;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new oe;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(r,"error",i),C(i)){const a={session:null,error:i};return Ct(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Jn(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Xe(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ee()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Le);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Le);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Le}ms, refresh threshold is ${hn} ticks`),r<=hn&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Wn)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ee()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await ke(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await S(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await S(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await S(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await S(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}}He.nextInstanceID=0;const Sa=He;class Ea extends Sa{constructor(e){super(e)}}var Ta=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function l(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):r(d.value).then(o,l)}c((n=n.apply(s,e||[])).next())})};class Pa{constructor(e,t,n){var r,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=Vi(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Ri,realtime:Li,auth:Object.assign(Object.assign({},Ii),{storageKey:l}),global:Oi},d=Fi(n??{},c);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=Hi(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ti(`${o}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Nr(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $i(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ta(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:a,lock:o,debug:l},c,d){var f;const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ea({url:this.authUrl,headers:Object.assign(Object.assign({},p),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:a,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:(f="Authorization"in this.headers)!==null&&f!==void 0?f:!1})}_initRealtimeClient(e){return new gi(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $a=(s,e,t)=>new Pa(s,e,t),Na="https://dpvwukegbhgdzamzgelm.supabase.co",Aa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRwdnd1a2VnYmhnZHphbXpnZWxtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY0NDA1MTUsImV4cCI6MjA1MjAxNjUxNX0.taHSWVOeai7BXi_qMRxthbrXJOOzO5Lzbaue-DUkfNY",Ce=$a(Na,Aa,{auth:{persistSession:!1},global:{headers:{"Content-Type":"application/json"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:1}}});async function Oa(){try{const{error:s}=await Ce.from("comments").select("count").limit(1).single();return!s}catch(s){return console.error("Supabase connection error:",s),!1}}function Ra({tokenId:s}){const[e,t]=v.useState([]),[n,r]=v.useState([]),[i,a]=v.useState(""),[o,l]=v.useState(""),[c,d]=v.useState(""),[f,p]=v.useState(""),[h,y]=v.useState("all"),[g,m]=v.useState(!0),[x,w]=v.useState(null),[k,O]=v.useState(!1);v.useEffect(()=>{async function _(){const L=await Oa();O(L),L||w("Unable to connect to the database. Please try again later.")}_()},[]),v.useEffect(()=>{k&&$()},[s,h,k]);async function $(){m(!0);try{let _=Ce.from("comments").select("*").eq("token_id",s).order("created_at",{ascending:!1});if(h!=="all"){const B=new Date;h==="day"&&B.setDate(B.getDate()-1),h==="week"&&B.setDate(B.getDate()-7),h==="month"&&B.setMonth(B.getMonth()-1),_=_.gte("created_at",B.toISOString())}const{data:L,error:se}=await _;if(se)throw se;L&&t(L);const{data:H,error:X}=await Ce.from("price_predictions").select("*").eq("token_id",s).order("created_at",{ascending:!1});if(X)throw X;H&&r(H)}catch(_){console.error("Error fetching social data:",_),w("Failed to load social data. Please try again later.")}finally{m(!1)}}async function U(_){if(_.preventDefault(),!o.trim()||!i.trim()){alert("Please enter both a nickname and a comment");return}try{const{error:L}=await Ce.from("comments").insert({token_id:s,content:i.trim(),nickname:o.trim()});if(L)throw L;a(""),$()}catch(L){console.error("Error posting comment:",L),alert("Failed to post comment. Please try again.")}}async function ue(_){if(_.preventDefault(),!o.trim()||!c||!f){alert("Please fill in all fields");return}try{const{error:L}=await Ce.from("price_predictions").insert({token_id:s,predicted_price:parseFloat(c),target_date:new Date(f).toISOString(),nickname:o.trim()});if(L)throw L;d(""),p(""),$()}catch(L){console.error("Error submitting prediction:",L),alert("Failed to submit prediction. Please try again.")}}async function ne(_,L,se){try{const H=_==="comment"?"comments":"price_predictions",{error:X}=await Ce.from(H).update({votes:se==="up"?1:-1}).eq("id",L);if(X)throw X;$()}catch(H){console.error("Error voting:",H),alert("Failed to vote. Please try again.")}}return x?u.jsx("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:u.jsx("p",{className:"text-pink-500",children:x})}):u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex gap-2 mb-4",children:u.jsxs("select",{value:h,onChange:_=>y(_.target.value),className:"px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",children:[u.jsx("option",{value:"all",children:"All Time"}),u.jsx("option",{value:"day",children:"Last 24h"}),u.jsx("option",{value:"week",children:"Last Week"}),u.jsx("option",{value:"month",children:"Last Month"})]})}),u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Community Discussion"}),u.jsxs("form",{onSubmit:U,className:"mb-4 space-y-4",children:[u.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",placeholder:"Enter your nickname",maxLength:50}),u.jsx("textarea",{value:i,onChange:_=>a(_.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",placeholder:"Add a comment...",rows:3,maxLength:1e3}),u.jsx("button",{type:"submit",className:"mt-2 px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-colors",children:"Post Comment"})]}),g?u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-20 bg-black/40 rounded-lg"}),u.jsx("div",{className:"h-20 bg-black/40 rounded-lg"})]}):u.jsx("div",{className:"space-y-4",children:e.map(_=>u.jsxs("div",{className:"p-4 bg-black/40 rounded-lg border border-cyan-500/20",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("span",{className:"text-cyan-300",children:_.nickname}),u.jsx("span",{className:"text-cyan-500/60 text-sm",children:new Date(_.created_at).toLocaleDateString()})]}),u.jsx("p",{className:"mt-2 text-cyan-100",children:_.content}),u.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[u.jsx("button",{onClick:()=>ne("comment",_.id,"up"),className:"text-cyan-400 hover:text-pink-400",children:u.jsx(Kt,{size:20})}),u.jsx("span",{className:"text-cyan-300",children:_.votes}),u.jsx("button",{onClick:()=>ne("comment",_.id,"down"),className:"text-cyan-400 hover:text-pink-400",children:u.jsx(Wt,{size:20})})]})]},_.id))})]}),u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Price Predictions"}),u.jsxs("form",{onSubmit:ue,className:"mb-4 space-y-4",children:[u.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",placeholder:"Enter your nickname",maxLength:50}),u.jsx("input",{type:"number",value:c,onChange:_=>d(_.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",placeholder:"Enter predicted price...",step:"0.000001",min:"0"}),u.jsx("input",{type:"date",value:f,onChange:_=>p(_.target.value),className:"w-full px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100",min:new Date().toISOString().split("T")[0]}),u.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-colors",children:"Submit Prediction"})]}),g?u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-20 bg-black/40 rounded-lg"}),u.jsx("div",{className:"h-20 bg-black/40 rounded-lg"})]}):u.jsx("div",{className:"space-y-4",children:n.map(_=>u.jsxs("div",{className:"p-4 bg-black/40 rounded-lg border border-cyan-500/20",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("span",{className:"text-cyan-300",children:_.nickname}),u.jsx("span",{className:"text-cyan-500/60 text-sm",children:new Date(_.created_at).toLocaleDateString()})]}),u.jsxs("div",{className:"mt-2",children:[u.jsxs("p",{className:"text-cyan-100",children:["Predicted Price: $",_.predicted_price.toFixed(6)]}),u.jsxs("p",{className:"text-cyan-300/60",children:["Target Date: ",new Date(_.target_date).toLocaleDateString()]})]}),u.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[u.jsx("button",{onClick:()=>ne("prediction",_.id,"up"),className:"text-cyan-400 hover:text-pink-400",children:u.jsx(Kt,{size:20})}),u.jsx("span",{className:"text-cyan-300",children:_.votes}),u.jsx("button",{onClick:()=>ne("prediction",_.id,"down"),className:"text-cyan-400 hover:text-pink-400",children:u.jsx(Wt,{size:20})})]})]},_.id))})]})]})}function Ia({logoUrl:s}){const[e,t]=v.useState([]);return v.useEffect(()=>{const n=()=>Array.from({length:5},(a,o)=>({id:Date.now()+o,x:Math.random()*100,delay:Math.random()*1e3,duration:4e3+Math.random()*2e3,rotation:Math.random()*720-360,scale:.5+Math.random()*1}));t(n());const r=setInterval(()=>{t(i=>[...i,...n()].slice(-15))},2e3);return()=>clearInterval(r)},[]),u.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:e.map(n=>u.jsx("img",{src:s,alt:"Falling Logo",className:"absolute w-8 h-8 rounded-full opacity-50 animate-fall",style:{left:`${n.x}%`,top:"-32px",animationDuration:`${n.duration}ms`,animationDelay:`${n.delay}ms`,transform:`rotate(${n.rotation}deg) scale(${n.scale})`,willChange:"transform"}},n.id))})}_s.register(xs,ks,js,Cs,Ss,Es,Ts,Ps,$s,Ns,As);function La({tokenId:s,currentPrice:e}){const[t,n]=v.useState([]),[r,i]=v.useState(!0),[a,o]=v.useState(null),l=v.useRef(null),c=v.useCallback(async()=>{try{i(!0),o(null);const g=await Ks("240");n(g)}catch(g){o("Failed to fetch chart data"),console.error("Chart data fetch error:",g)}finally{i(!1)}},[]);v.useEffect(()=>{c();const g=setInterval(c,3e5);return()=>clearInterval(g)},[c]);const d=()=>{l.current&&l.current.zoom(1.1)},f=()=>{l.current&&l.current.zoom(.9)},p=()=>{l.current&&l.current.resetZoom()},h={responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{point:{radius:0,hitRadius:10,hoverRadius:4},line:{tension:0}},scales:{x:{type:"time",time:{unit:"day"},grid:{display:!1},ticks:{maxRotation:0,autoSkip:!0,maxTicksLimit:8}},y:{position:"right",grid:{display:!1},ticks:{callback:g=>`$${Number(g).toFixed(6)}`}},y1:{position:"left",grid:{display:!1},ticks:{callback:g=>`${Number(g).toLocaleString()}`}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1,animation:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",callbacks:{label:g=>{const m=g.parsed.y;return g.dataset.yAxisID==="y1"?`Volume: ${m.toLocaleString()}`:`Price: $${m.toFixed(6)}`}}},zoom:{limits:{x:{min:"original",max:"original"}},pan:{enabled:!0,mode:"x",threshold:10},zoom:{wheel:{enabled:!0,speed:.1},pinch:{enabled:!0},mode:"x"}}}},y={labels:t.map(g=>new Date(g.time)),datasets:[{data:t.map(g=>g.close),borderColor:"#ff00ff",backgroundColor:"transparent",borderWidth:1,fill:!1,yAxisID:"y"},{type:"bar",data:t.map(g=>g.volume),yAxisID:"y1",backgroundColor:"rgba(0, 255, 255, 0.2)",borderColor:"transparent",maxBarThickness:2}]};return u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500",children:"Price Chart (ByBit)"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:d,className:"p-2 rounded-md bg-black/40 text-cyan-300 hover:bg-pink-500/20 transition-colors",title:"Zoom In",children:u.jsx(Zs,{size:20})}),u.jsx("button",{onClick:f,className:"p-2 rounded-md bg-black/40 text-cyan-300 hover:bg-pink-500/20 transition-colors",title:"Zoom Out",children:u.jsx(Ws,{size:20})}),u.jsx("button",{onClick:p,className:"p-2 rounded-md bg-black/40 text-cyan-300 hover:bg-pink-500/20 transition-colors",title:"Reset Zoom",children:u.jsx(qs,{size:20})}),e&&u.jsxs("span",{className:"text-cyan-300 font-mono ml-4",children:["$",e.toFixed(6)]})]})]}),u.jsxs("div",{className:"h-[600px] relative",children:[r&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 z-10",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-cyan-500"})}),a?u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40",children:u.jsx("p",{className:"text-pink-500",children:a})}):u.jsx(Os,{data:y,options:h,ref:l})]})]})}const pn=s=>{let e;const t=new Set,n=(d,f)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const h=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(y=>y(e,h))}},r=()=>e,l={setState:n,getState:r,getInitialState:()=>c,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{t.clear()}},c=e=s(n,r,l);return l},Da=s=>s?pn(s):pn;var Kn={exports:{}},Gn={},Yn={exports:{}},Xn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pe=v;function Ma(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var Ua=typeof Object.is=="function"?Object.is:Ma,Ha=Pe.useState,Ba=Pe.useEffect,Va=Pe.useLayoutEffect,Fa=Pe.useDebugValue;function za(s,e){var t=e(),n=Ha({inst:{value:t,getSnapshot:e}}),r=n[0].inst,i=n[1];return Va(function(){r.value=t,r.getSnapshot=e,St(r)&&i({inst:r})},[s,t,e]),Ba(function(){return St(r)&&i({inst:r}),s(function(){St(r)&&i({inst:r})})},[s]),Fa(t),t}function St(s){var e=s.getSnapshot;s=s.value;try{var t=e();return!Ua(s,t)}catch{return!0}}function qa(s,e){return e()}var Ja=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qa:za;Xn.useSyncExternalStore=Pe.useSyncExternalStore!==void 0?Pe.useSyncExternalStore:Ja;Yn.exports=Xn;var Za=Yn.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft=v,Wa=Za;function Ka(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var Ga=typeof Object.is=="function"?Object.is:Ka,Ya=Wa.useSyncExternalStore,Xa=ft.useRef,Qa=ft.useEffect,eo=ft.useMemo,to=ft.useDebugValue;Gn.useSyncExternalStoreWithSelector=function(s,e,t,n,r){var i=Xa(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=eo(function(){function l(h){if(!c){if(c=!0,d=h,h=n(h),r!==void 0&&a.hasValue){var y=a.value;if(r(y,h))return f=y}return f=h}if(y=f,Ga(d,h))return y;var g=n(h);return r!==void 0&&r(y,g)?(d=h,y):(d=h,f=g)}var c=!1,d,f,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,n,r]);var o=Ya(s,i[0],i[1]);return Qa(function(){a.hasValue=!0,a.value=o},[o]),to(o),o};Kn.exports=Gn;var no=Kn.exports;const so=ms(no),{useDebugValue:ro}=b,{useSyncExternalStoreWithSelector:io}=so,ao=s=>s;function oo(s,e=ao,t){const n=io(s.subscribe,s.getState,s.getServerState||s.getInitialState,e,t);return ro(n),n}const lo=s=>{const e=typeof s=="function"?Da(s):s,t=(n,r)=>oo(e,n,r);return Object.assign(t,e),t},co=s=>lo;function uo(s,e){let t;try{t=s()}catch{return}return{getItem:r=>{var i;const a=l=>l===null?null:JSON.parse(l,void 0),o=(i=t.getItem(r))!=null?i:null;return o instanceof Promise?o.then(a):a(o)},setItem:(r,i)=>t.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>t.removeItem(r)}}const Be=s=>e=>{try{const t=s(e);return t instanceof Promise?t:{then(n){return Be(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return Be(n)(t)}}}},ho=(s,e)=>(t,n,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,x)=>({...x,...m}),...e},a=!1;const o=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return s((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...m)},n,r);const d=Be(i.serialize),f=()=>{const m=i.partialize({...n()});let x;const w=d({state:m,version:i.version}).then(k=>c.setItem(i.name,k)).catch(k=>{x=k});if(x)throw x;return w},p=r.setState;r.setState=(m,x)=>{p(m,x),f()};const h=s((...m)=>{t(...m),f()},n,r);let y;const g=()=>{var m;if(!c)return;a=!1,o.forEach(w=>w(n()));const x=((m=i.onRehydrateStorage)==null?void 0:m.call(i,n()))||void 0;return Be(c.getItem.bind(c))(i.name).then(w=>{if(w)return i.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return i.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var k;return y=i.merge(w,(k=n())!=null?k:h),t(y,!0),f()}).then(()=>{x==null||x(y,void 0),a=!0,l.forEach(w=>w(y))}).catch(w=>{x==null||x(void 0,w)})};return r.persist={setOptions:m=>{i={...i,...m},m.getStorage&&(c=m.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:m=>(o.add(m),()=>{o.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},g(),y||h},fo=(s,e)=>(t,n,r)=>{let i={storage:uo(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},a=!1;const o=new Set,l=new Set;let c=i.storage;if(!c)return s((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...g)},n,r);const d=()=>{const g=i.partialize({...n()});return c.setItem(i.name,{state:g,version:i.version})},f=r.setState;r.setState=(g,m)=>{f(g,m),d()};const p=s((...g)=>{t(...g),d()},n,r);r.getInitialState=()=>p;let h;const y=()=>{var g,m;if(!c)return;a=!1,o.forEach(w=>{var k;return w((k=n())!=null?k:p)});const x=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=n())!=null?g:p))||void 0;return Be(c.getItem.bind(c))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var k;const[O,$]=w;if(h=i.merge($,(k=n())!=null?k:p),t(h,!0),O)return d()}).then(()=>{x==null||x(h,void 0),h=n(),a=!0,l.forEach(w=>w(h))}).catch(w=>{x==null||x(void 0,w)})};return r.persist={setOptions:g=>{i={...i,...g},g.storage&&(c=g.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:g=>(o.add(g),()=>{o.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},i.skipHydration||y(),h||p},po=(s,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?ho(s,e):fo(s,e),mo=po,Qn=co()(mo((s,e)=>({alerts:[],addAlert:t=>{const n={...t,id:crypto.randomUUID(),createdAt:new Date().toISOString(),triggered:!1};s(r=>({alerts:[...r.alerts,n]}))},removeAlert:t=>{s(n=>({alerts:n.alerts.filter(r=>r.id!==t)}))},checkAlerts:(t,n)=>{const r=[];return s(i=>({alerts:i.alerts.map(o=>o.tokenId===t&&!o.triggered&&(o.type==="above"&&n>=o.price||o.type==="below"&&n<=o.price)?(r.push({...o,triggered:!0}),{...o,triggered:!0}):o)})),r},clearTriggeredAlerts:()=>{s(t=>({alerts:t.alerts.filter(n=>!n.triggered)}))}}),{name:"price-alerts"}));function go({tokenId:s,currentPrice:e}){const[t,n]=v.useState(""),[r,i]=v.useState("above"),{alerts:a,addAlert:o,removeAlert:l}=Qn(),c=a.filter(f=>f.tokenId===s),d=f=>{f.preventDefault();const p=parseFloat(t);!isNaN(p)&&p>0&&(o({tokenId:s,price:p,type:r}),n(""))};return u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsxs("h2",{className:"text-xl font-semibold text-pink-500 mb-4 flex items-center gap-2",children:[u.jsx(Fs,{size:20}),"Price Alerts"]}),u.jsxs("form",{onSubmit:d,className:"mb-6 space-y-4",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx("input",{type:"number",value:t,onChange:f=>n(f.target.value),placeholder:"Enter price",step:"0.000001",min:"0",className:"flex-1 px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100 focus:outline-none focus:ring-2 focus:ring-pink-500"}),u.jsxs("select",{value:r,onChange:f=>i(f.target.value),className:"px-3 py-2 bg-black/40 border border-cyan-500/20 rounded-md text-cyan-100 focus:outline-none focus:ring-2 focus:ring-pink-500",children:[u.jsx("option",{value:"above",children:"Above"}),u.jsx("option",{value:"below",children:"Below"})]})]}),u.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 transition-colors",children:"Add Alert"})]}),c.length>0?u.jsx("div",{className:"space-y-3",children:c.map(f=>u.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${f.triggered?"bg-green-500/20 border-green-500/30":"bg-black/40 border-cyan-500/20"} border`,children:[u.jsxs("div",{children:[u.jsxs("p",{className:"text-cyan-300",children:["Alert when price goes"," ",u.jsx("span",{className:"text-pink-400",children:f.type})," ",u.jsxs("span",{className:"font-mono",children:["$",f.price.toFixed(6)]})]}),u.jsx("p",{className:"text-sm text-cyan-300/60",children:new Date(f.createdAt).toLocaleString()})]}),u.jsx("button",{onClick:()=>l(f.id),className:"p-2 text-cyan-300 hover:text-pink-400 transition-colors",title:"Remove alert",children:u.jsx(Js,{size:20})})]},f.id))}):u.jsx("p",{className:"text-center text-cyan-300/60",children:"No alerts set"})]})}function mn(){var y,g;const{id:s}=gs(),e=ys(),[t,n]=v.useState(null),[r,i]=v.useState(!0),[a,o]=v.useState(null),[l,c]=v.useState(0),d=Qn(m=>m.checkAlerts),f=vn.find(m=>m.id===s);if(v.useEffect(()=>{if(!f){e("/");return}let m=!0,x;const w=async()=>{if(!m||f.status!=="live"){i(!1);return}try{o(null);const k=await Cn();if(m){if(k["fuel-network"]){const O=k["fuel-network"].usd;n({market_data:{current_price:{usd:O}}}),f.id&&d(f.id,O).forEach(U=>{hr.success(`Price Alert: ${f.name} is ${U.type} $${U.price}`,{description:`Current price: $${O}`,duration:1e4})})}c(0)}}catch(k){if(m&&(console.error("Error fetching data:",k),o(k instanceof Error?k.message:"Failed to fetch data"),t||n({market_data:{current_price:{usd:.04}}}),l<3)){const O=Math.min(1e3*Math.pow(2,l),1e4);setTimeout(()=>{m&&c($=>$+1)},O)}}finally{m&&i(!1)}};return w(),x=setInterval(w,6e4),()=>{m=!1,clearInterval(x)}},[f,e,l,d]),!f)return u.jsx("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:u.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:u.jsx("p",{className:"text-pink-500",children:"Token not found"})})});const p=(t==null?void 0:t.market_data.current_price.usd)||null,h=p?tt(f,{[f.id]:{usd:p}}):null;return u.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:[u.jsx(xr,{position:"top-right"}),u.jsx(Ia,{logoUrl:f.logo}),u.jsxs(gn,{to:"/",className:"flex items-center gap-2 text-cyan-400 hover:text-pink-400 mb-8",children:[u.jsx(Vs,{size:20}),"Back to Overview"]}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-black/40 rounded-xl p-4 md:p-8 backdrop-blur-sm shadow-xl border border-cyan-500/20",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx("img",{src:f.logo,alt:`${f.name} logo`,className:"w-16 h-16 rounded-full ring-2 ring-cyan-500/20"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:f.name}),u.jsxs("p",{className:"text-pink-400",children:["Sale Date: ",f.date]})]})]}),a&&u.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(_n,{className:"text-pink-500"}),u.jsx("p",{className:"text-pink-500",children:a})]}),u.jsx("p",{className:"text-cyan-300 text-sm",children:"Using last known price data"})]}),r?u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-8 bg-cyan-500/20 rounded w-1/3"}),u.jsx("div",{className:"h-8 bg-cyan-500/20 rounded w-1/2"}),u.jsx("div",{className:"h-8 bg-cyan-500/20 rounded w-2/3"})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.status==="live"&&u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Investment Details"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{children:["Buy Price: ",u.jsxs("span",{className:"text-cyan-300",children:["$",f.buyPrice]})]}),p&&u.jsxs("p",{children:["Current Price: ",u.jsxs("span",{className:"text-cyan-300",children:["$",p.toFixed(6)]})]}),h&&u.jsxs("p",{children:["Current ROI: ",u.jsx("span",{className:h>=100?"text-green-400":"text-pink-500",children:nt(h)})]}),f.unlockPrice&&u.jsxs("p",{children:["Unlock Price: ",u.jsxs("span",{className:"text-cyan-300",children:["$",f.unlockPrice]})]}),f.highestPrice&&u.jsxs("p",{children:["ATH Price: ",u.jsxs("span",{className:"text-cyan-300",children:["$",f.highestPrice]})]})]})]}),u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Links"}),u.jsxs("div",{className:"space-y-2",children:[((y=f.links)==null?void 0:y.website)&&u.jsx("p",{children:u.jsx("a",{href:f.links.website,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-pink-400",children:"Website"})}),((g=f.links)==null?void 0:g.twitter)&&u.jsx("p",{children:u.jsx("a",{href:f.links.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-pink-400",children:"Twitter"})})]})]})]}),f.status==="live"&&u.jsxs(u.Fragment,{children:[u.jsx(La,{tokenId:f.id,currentPrice:p}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx(kr,{currentPrice:p}),u.jsx(go,{tokenId:f.id,currentPrice:p})]})]}),f.about&&u.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10",children:[u.jsxs("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:["About ",f.name]}),u.jsx("p",{className:"text-cyan-100 leading-relaxed",children:f.about})]})]})]}),f.status==="live"&&u.jsx(Ra,{tokenId:f.id})]})]})}function yo(){const[s,e]=v.useState([]),[t,n]=v.useState(!0),r=bs();return v.useEffect(()=>{n(r.pathname==="/")},[r]),v.useEffect(()=>{if(!t)return;const i=()=>Array.from({length:8},(l,c)=>({id:Date.now()+c,x:Math.random()*100,y:-10,rotation:Math.random()*720-360,delay:Math.random()*1e3,tx:Math.random()*200-100,ty:Math.random()*50+100}));e(i());const a=setInterval(()=>{e(o=>[...o,...i()].slice(-20))},2e3);return()=>clearInterval(a)},[t]),t?u.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:s.map(i=>u.jsx("div",{className:"absolute text-3xl animate-float",style:{left:`${i.x}%`,top:`${i.y}%`,animationDelay:`${i.delay}ms`,"--rotation":`${i.rotation}deg`,"--tx":`${i.tx}px`,"--ty":`${i.ty}px`},children:"🌽"},i.id))}):null}function bo(){const[s,e]=v.useState([]),[t,n]=v.useState("initial");return v.useEffect(()=>{const i=Array.from({length:15},(o,l)=>{const c=Math.PI*2*l/15,d=150+Math.random()*100;return{id:l,initialX:0,initialY:0,targetX:Math.cos(c)*d,targetY:Math.sin(c)*d,rotation:Math.random()*720-360,scale:.5+Math.random()*.5,opacity:.6+Math.random()*.4,delay:Math.random()*200}});e(i),(async()=>{await new Promise(o=>setTimeout(o,500)),n("explode"),await new Promise(o=>setTimeout(o,2e3)),n("hidden"),await new Promise(o=>setTimeout(o,500)),n("reassemble")})()},[]),u.jsxs("div",{className:"relative h-[50px] w-[165px] mx-auto",children:[u.jsx("svg",{width:"165",height:"32",viewBox:"0 0 165 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`absolute transition-all duration-1000 ${t==="initial"?"opacity-100 scale-100":"opacity-0 scale-0"}`,children:u.jsx("path",{d:"M4.56043 31.191H0V0.613505H4.55763L4.56043 31.191ZM8.18359 27.2053V31.191H23.2694V27.2053H8.18359ZM136.809 16.0177C136.809 18.1019 136.505 20.1082 135.899 22.0352C135.292 23.9621 134.384 25.6694 133.172 27.1529C131.959 28.6378 130.451 29.8152 128.647 30.6866C127.414 31.2816 126.04 31.6741 124.529 31.8626V27.8585C125.387 27.6871 126.17 27.4065 126.876 27.0183C128.144 26.3212 129.182 25.4002 129.99 24.2526C130.799 23.1049 131.392 21.8141 131.77 20.3817C132.148 18.9478 132.336 17.4927 132.336 16.0191C132.336 14.5456 132.148 13.0905 131.77 11.6552C131.392 10.2213 130.799 8.93053 129.99 7.78428C129.182 6.63662 128.142 5.71565 126.876 5.01855C125.609 4.32145 124.098 3.97432 122.345 3.97432C120.593 3.97432 119.082 4.32287 117.816 5.01855C116.548 5.71565 115.51 6.63662 114.702 7.78428C113.893 8.93195 113.299 10.2213 112.922 11.6552C112.545 13.089 112.356 14.5442 112.356 16.0191C112.356 17.4941 112.545 18.9478 112.922 20.3817C113.3 21.8155 113.893 23.1063 114.702 24.2526C115.51 25.4002 116.548 26.3212 117.816 27.0183C118.522 27.4065 119.306 27.6871 120.163 27.8585V31.8626C118.652 31.6741 117.279 31.2831 116.045 30.6866C114.24 29.8166 112.732 28.6378 111.521 27.1529C110.308 25.668 109.399 23.9621 108.793 22.0352C108.187 20.1082 107.884 18.1019 107.884 16.0177C107.884 13.9335 108.186 11.9272 108.793 10.0003C109.399 8.07332 110.308 6.36741 111.521 4.88253C112.732 3.39765 114.242 2.21315 116.045 1.32761C117.848 0.44348 119.949 0 122.345 0C124.742 0 126.841 0.44348 128.646 1.32761C130.451 2.21315 131.959 3.39765 133.17 4.88253C134.382 6.36741 135.291 8.07332 135.898 10.0003C136.504 11.9272 136.807 13.9335 136.807 16.0177H136.809ZM83.1005 27.2053H92.3613V31.191H83.1005V27.2053ZM92.3627 0.613505H83.1019V4.59916H92.3627V0.613505ZM96.7259 31.191H106.369V27.2053H96.7259V31.191ZM92.3627 4.59916V27.2039H96.7259V4.59916H92.3627ZM96.7259 0.613505V4.59916H106.369V0.613505H96.7259ZM164.5 8.6259V31.2306H159.637L144.645 7.90047V31.2306H140.295V0.653177H144.96L160.149 24.4311V8.6259H164.5ZM164.5 4.63883V0.653177H160.149V4.63883H164.5ZM50.1619 27.2053V31.191H26.8939V17.4601H31.4544L31.4516 27.2039H50.1619V27.2053ZM31.4516 13.4744V4.59916H50.0374V0.613505H26.8939V13.4744H31.4516ZM47.6621 13.4744H31.4474V17.4459H47.6621V13.4744ZM79.2927 17.4898V31.2179H75.1282V28.1872C74.044 29.4284 72.7472 30.3564 71.263 30.9501C69.52 31.6472 67.7392 32 65.9681 32C63.7229 32 61.6847 31.5735 59.9095 30.7319C58.1371 29.8917 56.6109 28.7426 55.3728 27.3172C54.1362 25.8947 53.1822 24.2356 52.5359 22.3865C51.891 20.5432 51.565 18.6021 51.565 16.6142C51.565 14.4081 51.87 12.28 52.4701 10.2879C53.073 8.28585 53.9837 6.50627 55.177 4.99872C56.3745 3.4855 57.8881 2.26416 59.6745 1.36586C61.4651 0.467567 63.5816 0.0127518 65.9681 0.0127518C67.5895 0.0127518 69.1423 0.206863 70.5859 0.589418C72.038 0.974806 73.3558 1.59114 74.5015 2.42143C75.6486 3.25313 76.6334 4.3172 77.4028 5.59805C78.8521 8.00815 79.0563 10.5897 79.0563 10.5897H74.4945C74.4945 10.5897 74.2846 8.95745 73.4173 7.48674C72.9445 6.68479 72.2912 6.04578 71.5554 5.53996C70.814 5.0313 69.9592 4.64308 69.0164 4.38663C68.0651 4.12876 67.0397 3.99841 65.9667 3.99841C64.2321 3.99841 62.7283 4.35262 61.4958 5.04972C60.2578 5.75107 59.2324 6.68762 58.449 7.83104C57.6587 8.98437 57.0669 10.3205 56.692 11.8025C56.3129 13.2945 56.1213 14.8431 56.1213 16.4059C56.1213 17.9687 56.3395 19.4224 56.7703 20.8266C57.1984 22.2236 57.8363 23.4761 58.6659 24.5458C59.4898 25.6113 60.5222 26.4714 61.7351 27.1061C62.9409 27.7381 64.365 28.0583 65.9653 28.0583C67.4636 28.0583 68.8037 27.8117 69.9494 27.3272C71.0909 26.8426 72.066 26.1682 72.848 25.3237C73.6299 24.4764 74.2287 23.469 74.626 22.327C74.8932 21.5591 75.061 20.7331 75.1254 19.8688V17.4913H79.2899L79.2927 17.4898ZM75.1282 13.5014H65.4296V17.4728H75.1282V13.5014Z",fill:"#F03C24",className:"origin-center"})}),s.map(r=>u.jsx("svg",{width:"165",height:"32",viewBox:"0 0 165 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`absolute top-0 left-0 transition-all duration-[2000ms] ease-in-out ${t==="hidden"?"opacity-0":""}`,style:{transform:`translate(${t==="explode"?r.targetX:r.initialX}px, ${t==="explode"?r.targetY:r.initialY}px) rotate(${t==="explode"?r.rotation:0}deg) scale(${t==="explode"?r.scale:1})`,opacity:t==="initial"?0:r.opacity,transitionDelay:`${r.delay}ms`,clipPath:`polygon(${r.id*100/s.length}% 0%, ${(r.id+1)*100/s.length}% 0%, ${(r.id+1)*100/s.length}% 100%, ${r.id*100/s.length}% 100%)`,filter:"drop-shadow(0 0 2px rgba(240, 60, 36, 0.5))"},children:u.jsx("path",{d:"M4.56043 31.191H0V0.613505H4.55763L4.56043 31.191ZM8.18359 27.2053V31.191H23.2694V27.2053H8.18359ZM136.809 16.0177C136.809 18.1019 136.505 20.1082 135.899 22.0352C135.292 23.9621 134.384 25.6694 133.172 27.1529C131.959 28.6378 130.451 29.8152 128.647 30.6866C127.414 31.2816 126.04 31.6741 124.529 31.8626V27.8585C125.387 27.6871 126.17 27.4065 126.876 27.0183C128.144 26.3212 129.182 25.4002 129.99 24.2526C130.799 23.1049 131.392 21.8141 131.77 20.3817C132.148 18.9478 132.336 17.4927 132.336 16.0191C132.336 14.5456 132.148 13.0905 131.77 11.6552C131.392 10.2213 130.799 8.93053 129.99 7.78428C129.182 6.63662 128.142 5.71565 126.876 5.01855C125.609 4.32145 124.098 3.97432 122.345 3.97432C120.593 3.97432 119.082 4.32287 117.816 5.01855C116.548 5.71565 115.51 6.63662 114.702 7.78428C113.893 8.93195 113.299 10.2213 112.922 11.6552C112.545 13.089 112.356 14.5442 112.356 16.0191C112.356 17.4941 112.545 18.9478 112.922 20.3817C113.3 21.8155 113.893 23.1063 114.702 24.2526C115.51 25.4002 116.548 26.3212 117.816 27.0183C118.522 27.4065 119.306 27.6871 120.163 27.8585V31.8626C118.652 31.6741 117.279 31.2831 116.045 30.6866C114.24 29.8166 112.732 28.6378 111.521 27.1529C110.308 25.668 109.399 23.9621 108.793 22.0352C108.187 20.1082 107.884 18.1019 107.884 16.0177C107.884 13.9335 108.186 11.9272 108.793 10.0003C109.399 8.07332 110.308 6.36741 111.521 4.88253C112.732 3.39765 114.242 2.21315 116.045 1.32761C117.848 0.44348 119.949 0 122.345 0C124.742 0 126.841 0.44348 128.646 1.32761C130.451 2.21315 131.959 3.39765 133.17 4.88253C134.382 6.36741 135.291 8.07332 135.898 10.0003C136.504 11.9272 136.807 13.9335 136.807 16.0177H136.809ZM83.1005 27.2053H92.3613V31.191H83.1005V27.2053ZM92.3627 0.613505H83.1019V4.59916H92.3627V0.613505ZM96.7259 31.191H106.369V27.2053H96.7259V31.191ZM92.3627 4.59916V27.2039H96.7259V4.59916H92.3627ZM96.7259 0.613505V4.59916H106.369V0.613505H96.7259ZM164.5 8.6259V31.2306H159.637L144.645 7.90047V31.2306H140.295V0.653177H144.96L160.149 24.4311V8.6259H164.5ZM164.5 4.63883V0.653177H160.149V4.63883H164.5ZM50.1619 27.2053V31.191H26.8939V17.4601H31.4544L31.4516 27.2039H50.1619V27.2053ZM31.4516 13.4744V4.59916H50.0374V0.613505H26.8939V13.4744H31.4516ZM47.6621 13.4744H31.4474V17.4459H47.6621V13.4744ZM79.2927 17.4898V31.2179H75.1282V28.1872C74.044 29.4284 72.7472 30.3564 71.263 30.9501C69.52 31.6472 67.7392 32 65.9681 32C63.7229 32 61.6847 31.5735 59.9095 30.7319C58.1371 29.8917 56.6109 28.7426 55.3728 27.3172C54.1362 25.8947 53.1822 24.2356 52.5359 22.3865C51.891 20.5432 51.565 18.6021 51.565 16.6142C51.565 14.4081 51.87 12.28 52.4701 10.2879C53.073 8.28585 53.9837 6.50627 55.177 4.99872C56.3745 3.4855 57.8881 2.26416 59.6745 1.36586C61.4651 0.467567 63.5816 0.0127518 65.9681 0.0127518C67.5895 0.0127518 69.1423 0.206863 70.5859 0.589418C72.038 0.974806 73.3558 1.59114 74.5015 2.42143C75.6486 3.25313 76.6334 4.3172 77.4028 5.59805C78.8521 8.00815 79.0563 10.5897 79.0563 10.5897H74.4945C74.4945 10.5897 74.2846 8.95745 73.4173 7.48674C72.9445 6.68479 72.2912 6.04578 71.5554 5.53996C70.814 5.0313 69.9592 4.64308 69.0164 4.38663C68.0651 4.12876 67.0397 3.99841 65.9667 3.99841C64.2321 3.99841 62.7283 4.35262 61.4958 5.04972C60.2578 5.75107 59.2324 6.68762 58.449 7.83104C57.6587 8.98437 57.0669 10.3205 56.692 11.8025C56.3129 13.2945 56.1213 14.8431 56.1213 16.4059C56.1213 17.9687 56.3395 19.4224 56.7703 20.8266C57.1984 22.2236 57.8363 23.4761 58.6659 24.5458C59.4898 25.6113 60.5222 26.4714 61.7351 27.1061C62.9409 27.7381 64.365 28.0583 65.9653 28.0583C67.4636 28.0583 68.8037 27.8117 69.9494 27.3272C71.0909 26.8426 72.066 26.1682 72.848 25.3237C73.6299 24.4764 74.2287 23.469 74.626 22.327C74.8932 21.5591 75.061 20.7331 75.1254 19.8688V17.4913H79.2899L79.2927 17.4898ZM75.1282 13.5014H65.4296V17.4728H75.1282V13.5014Z",fill:"#F03C24",className:"origin-center"})},r.id)),u.jsxs("svg",{width:"165",height:"32",viewBox:"0 0 165 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`absolute transition-all duration-1000 ${t==="reassemble"?"opacity-100 scale-100 animate-reassemble":"opacity-0 scale-0"}`,children:[u.jsx("path",{d:"M4.56043 31.191H0V0.613505H4.55763L4.56043 31.191ZM8.18359 27.2053V31.191H23.2694V27.2053H8.18359ZM136.809 16.0177C136.809 18.1019 136.505 20.1082 135.899 22.0352C135.292 23.9621 134.384 25.6694 133.172 27.1529C131.959 28.6378 130.451 29.8152 128.647 30.6866C127.414 31.2816 126.04 31.6741 124.529 31.8626V27.8585C125.387 27.6871 126.17 27.4065 126.876 27.0183C128.144 26.3212 129.182 25.4002 129.99 24.2526C130.799 23.1049 131.392 21.8141 131.77 20.3817C132.148 18.9478 132.336 17.4927 132.336 16.0191C132.336 14.5456 132.148 13.0905 131.77 11.6552C131.392 10.2213 130.799 8.93053 129.99 7.78428C129.182 6.63662 128.142 5.71565 126.876 5.01855C125.609 4.32145 124.098 3.97432 122.345 3.97432C120.593 3.97432 119.082 4.32287 117.816 5.01855C116.548 5.71565 115.51 6.63662 114.702 7.78428C113.893 8.93195 113.299 10.2213 112.922 11.6552C112.545 13.089 112.356 14.5442 112.356 16.0191C112.356 17.4941 112.545 18.9478 112.922 20.3817C113.3 21.8155 113.893 23.1063 114.702 24.2526C115.51 25.4002 116.548 26.3212 117.816 27.0183C118.522 27.4065 119.306 27.6871 120.163 27.8585V31.8626C118.652 31.6741 117.279 31.2831 116.045 30.6866C114.24 29.8166 112.732 28.6378 111.521 27.1529C110.308 25.668 109.399 23.9621 108.793 22.0352C108.187 20.1082 107.884 18.1019 107.884 16.0177C107.884 13.9335 108.186 11.9272 108.793 10.0003C109.399 8.07332 110.308 6.36741 111.521 4.88253C112.732 3.39765 114.242 2.21315 116.045 1.32761C117.848 0.44348 119.949 0 122.345 0C124.742 0 126.841 0.44348 128.646 1.32761C130.451 2.21315 131.959 3.39765 133.17 4.88253C134.382 6.36741 135.291 8.07332 135.898 10.0003C136.504 11.9272 136.807 13.9335 136.807 16.0177H136.809ZM83.1005 27.2053H92.3613V31.191H83.1005V27.2053ZM92.3627 0.613505H83.1019V4.59916H92.3627V0.613505ZM96.7259 31.191H106.369V27.2053H96.7259V31.191ZM92.3627 4.59916V27.2039H96.7259V4.59916H92.3627ZM96.7259 0.613505V4.59916H106.369V0.613505H96.7259ZM164.5 8.6259V31.2306H159.637L144.645 7.90047V31.2306H140.295V0.653177H144.96L160.149 24.4311V8.6259H164.5ZM164.5 4.63883V0.653177H160.149V4.63883H164.5ZM50.1619 27.2053V31.191H26.8939V17.4601H31.4544L31.4516 27.2039H50.1619V27.2053ZM31.4516 13.4744V4.59916H50.0374V0.613505H26.8939V13.4744H31.4516ZM47.6621 13.4744H31.4474V17.4459H47.6621V13.4744ZM79.2927 17.4898V31.2179H75.1282V28.1872C74.044 29.4284 72.7472 30.3564 71.263 30.9501C69.52 31.6472 67.7392 32 65.9681 32C63.7229 32 61.6847 31.5735 59.9095 30.7319C58.1371 29.8917 56.6109 28.7426 55.3728 27.3172C54.1362 25.8947 53.1822 24.2356 52.5359 22.3865C51.891 20.5432 51.565 18.6021 51.565 16.6142C51.565 14.4081 51.87 12.28 52.4701 10.2879C53.073 8.28585 53.9837 6.50627 55.177 4.99872C56.3745 3.4855 57.8881 2.26416 59.6745 1.36586C61.4651 0.467567 63.5816 0.0127518 65.9681 0.0127518C67.5895 0.0127518 69.1423 0.206863 70.5859 0.589418C72.038 0.974806 73.3558 1.59114 74.5015 2.42143C75.6486 3.25313 76.6334 4.3172 77.4028 5.59805C78.8521 8.00815 79.0563 10.5897 79.0563 10.5897H74.4945C74.4945 10.5897 74.2846 8.95745 73.4173 7.48674C72.9445 6.68479 72.2912 6.04578 71.5554 5.53996C70.814 5.0313 69.9592 4.64308 69.0164 4.38663C68.0651 4.12876 67.0397 3.99841 65.9667 3.99841C64.2321 3.99841 62.7283 4.35262 61.4958 5.04972C60.2578 5.75107 59.2324 6.68762 58.449 7.83104C57.6587 8.98437 57.0669 10.3205 56.692 11.8025C56.3129 13.2945 56.1213 14.8431 56.1213 16.4059C56.1213 17.9687 56.3395 19.4224 56.7703 20.8266C57.1984 22.2236 57.8363 23.4761 58.6659 24.5458C59.4898 25.6113 60.5222 26.4714 61.7351 27.1061C62.9409 27.7381 64.365 28.0583 65.9653 28.0583C67.4636 28.0583 68.8037 27.8117 69.9494 27.3272C71.0909 26.8426 72.066 26.1682 72.848 25.3237C73.6299 24.4764 74.2287 23.469 74.626 22.327C74.8932 21.5591 75.061 20.7331 75.1254 19.8688V17.4913H79.2899L79.2927 17.4898ZM75.1282 13.5014H65.4296V17.4728H75.1282V13.5014Z",fill:"#F03C24",className:"origin-center"}),"```"]})]})}function wo(){const[s,e]=v.useState(!1);return v.useEffect(()=>{e(!0)},[]),u.jsxs("footer",{className:"mt-12 text-center space-y-6 pb-8",children:[u.jsxs("p",{className:"text-cyan-300/60 text-sm",children:["© ",new Date().getFullYear()," Legion Sales Tracker. All rights reserved. Not affiliated with Legion, not official tracker."]}),u.jsx("div",{className:"relative overflow-hidden py-4",children:u.jsx("div",{className:`transform transition-all duration-1000 ${s?"translate-y-0 opacity-100":"translate-y-20 opacity-0"}`,children:u.jsx("p",{className:"text-xl bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 bg-clip-text text-transparent font-bold animate-pulse",children:"This is Legion. Let's f**king build.⚔️🛡️"})})}),u.jsx("div",{className:`transform transition-all duration-1000 delay-500 ${s?"translate-y-0 opacity-100":"translate-y-20 opacity-0"}`,children:u.jsxs("div",{className:"inline-flex items-center gap-2 group",children:[u.jsx("span",{className:"text-cyan-400",children:"Built by"}),u.jsxs("a",{href:"https://x.com/isavazh",target:"_blank",rel:"noopener noreferrer",className:"relative inline-block",children:[u.jsx("span",{className:"relative z-10 text-pink-400 font-bold group-hover:text-cyan-300 transition-colors duration-300",children:"@isavazh"}),u.jsx("span",{className:"absolute inset-x-0 bottom-0 h-0.5 bg-gradient-to-r from-pink-500 to-cyan-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300"})]}),u.jsx("div",{className:"relative w-6 h-6 animate-spin-slow",children:u.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-pink-500/50 border-t-pink-500 animate-spin"})})]})})]})}const vo={future:{v7_startTransition:!0,v7_relativeSplatPath:!0}};function _o(){return u.jsx(ws,{...vo,children:u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-black to-blue-900 text-cyan-300",children:[u.jsx(yo,{}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[u.jsxs("header",{className:"text-center mb-12",children:[u.jsx("div",{className:"flex flex-col items-center justify-center gap-4 mb-6",children:u.jsx(bo,{})}),u.jsx("p",{className:"text-cyan-200 max-w-2xl mx-auto border-b border-cyan-500/20 pb-4",children:"Track your ICO investments and monitor their performance in real-time. Stay updated with the latest prices and ROI calculations."})]}),u.jsx("main",{children:u.jsxs(vs,{children:[u.jsx(vt,{path:"/",element:u.jsx("div",{className:"bg-black/40 rounded-xl p-6 backdrop-blur-sm shadow-xl border border-cyan-500/20",children:u.jsx(Ys,{})})}),u.jsx(vt,{path:"/token/:id",element:u.jsx(mn,{})}),u.jsx(vt,{path:"*",element:u.jsx(mn,{})})]})}),u.jsx(wo,{})]})]})})}wn(document.getElementById("root")).render(u.jsx(v.StrictMode,{children:u.jsx(_o,{})}));
