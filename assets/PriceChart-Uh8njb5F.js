import{c as o,f as g,j as t}from"./index-0mpu58Uf.js";import{r as s}from"./vendor-DLkZsigC.js";import{C as k,a as j,L as v,P as C,b as N,B as I,c as R,T as Z,p as L,d as w,e as D,f as S,g as z}from"./charts-R36fmogF.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=o("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=o("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=o("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);k.register(j,v,C,N,I,R,Z,L,w,D,S);function T({tokenId:A,currentPrice:i}){const[r,u]=s.useState([]),[x,l]=s.useState(!0),[c,d]=s.useState(null),a=s.useRef(null),n=s.useCallback(async()=>{try{l(!0),d(null);const e=await g("240");u(e)}catch(e){d("Failed to fetch chart data"),console.error("Chart data fetch error:",e)}finally{l(!1)}},[]);s.useEffect(()=>{n();const e=setInterval(n,3e5);return()=>clearInterval(e)},[n]);const p=()=>{a.current&&a.current.zoom(1.1)},y=()=>{a.current&&a.current.zoom(.9)},b=()=>{a.current&&a.current.resetZoom()},f={responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{point:{radius:0,hitRadius:10,hoverRadius:4},line:{tension:0}},scales:{x:{type:"time",time:{unit:"day"},grid:{display:!1},ticks:{maxRotation:0,autoSkip:!0,maxTicksLimit:6}},y:{position:"right",grid:{display:!1},ticks:{callback:e=>`$${Number(e).toFixed(6)}`}},y1:{position:"left",grid:{display:!1},ticks:{callback:e=>`${Number(e).toLocaleString()}`}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1,animation:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",callbacks:{label:e=>{const m=e.parsed.y;return e.dataset.yAxisID==="y1"?`Volume: ${m.toLocaleString()}`:`Price: $${m.toFixed(6)}`}}},zoom:{limits:{x:{min:"original",max:"original"}},pan:{enabled:!0,mode:"x",threshold:10},zoom:{wheel:{enabled:!0,speed:.1},pinch:{enabled:!0},mode:"x"}}}},h={labels:r.map(e=>new Date(e.time)),datasets:[{data:r.map(e=>e.close),borderColor:"#ff00ff",backgroundColor:"transparent",borderWidth:1,fill:!1,yAxisID:"y"},{type:"bar",data:r.map(e=>e.volume),yAxisID:"y1",backgroundColor:"rgba(0, 255, 255, 0.2)",borderColor:"transparent",maxBarThickness:2}]};return t.jsxs("div",{className:"bg-black/20 p-4 rounded-lg border border-cyan-500/10",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-pink-500",children:"Price Chart (ByBit)"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:p,className:"p-1.5 rounded-md bg-black/40 text-cyan-300 hover:bg-pink-500/20 transition-colors",title:"Zoom In",children:t.jsx($,{size:16})}),t.jsx("button",{onClick:y,className:"p-1.5 rounded-md bg-black/40 text-cyan-300 hover:bg-pink-500/20 transition-colors",title:"Zoom Out",children:t.jsx(B,{size:16})}),t.jsx("button",{onClick:b,className:"p-1.5 rounded-md bg-black/40 text-cyan-300 hover:bg-pink-500/20 transition-colors",title:"Reset Zoom",children:t.jsx(E,{size:16})}),i&&t.jsxs("span",{className:"text-cyan-300 font-mono ml-2",children:["$",i.toFixed(6)]})]})]}),t.jsxs("div",{className:"h-[400px] relative",children:[x&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 z-10",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-cyan-500"})}),c?t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40",children:t.jsx("p",{className:"text-pink-500",children:c})}):t.jsx(z,{data:h,options:f,ref:a})]})]})}export{T as PriceChart};
