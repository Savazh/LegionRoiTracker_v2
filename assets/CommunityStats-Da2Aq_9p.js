import{c as k,j as t,m as p}from"./index-CSILIi7G.js";import{r as x}from"./vendor-DLkZsigC.js";import{s as c}from"./supabase-DZrqkle7.js";import{M as j,T as N,a as M}from"./trending-up-4NveKSX4.js";import"./charts-R36fmogF.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=k("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function U({tokenId:n}){const[r,y]=x.useState({totalMembers:0,totalComments:0,totalPredictions:0,totalVotes:0,sentiment:0});x.useEffect(()=>{const e=async()=>{try{const{data:a}=await c.from("comments").select("nickname").eq("token_id",n),{data:o}=await c.from("price_predictions").select("nickname").eq("token_id",n),u=new Set([...(a==null?void 0:a.map(s=>s.nickname))||[],...(o==null?void 0:o.map(s=>s.nickname))||[]]),{data:i}=await c.from("comments").select("votes").eq("token_id",n),{data:l}=await c.from("price_predictions").select("votes").eq("token_id",n),g=[...i||[],...l||[]].reduce((s,f)=>s+(f.votes||0),0),v=[...i||[],...l||[]].filter(s=>s.votes>0).length,d=((i==null?void 0:i.length)||0)+((l==null?void 0:l.length)||0),h=d>0?v/d:0;y({totalMembers:u.size,totalComments:(a==null?void 0:a.length)||0,totalPredictions:(o==null?void 0:o.length)||0,totalVotes:g,sentiment:h})}catch(a){console.error("Error fetching community stats:",a)}};e();const m=setInterval(e,6e4);return()=>clearInterval(m)},[n]);const b=[{icon:t.jsx(w,{className:"text-cyan-400",size:20}),label:"Members",value:r.totalMembers,color:"cyan"},{icon:t.jsx(j,{className:"text-pink-400",size:20}),label:"Comments",value:r.totalComments,color:"pink"},{icon:t.jsx(N,{className:"text-green-400",size:20}),label:"Predictions",value:r.totalPredictions,color:"green"},{icon:t.jsx(M,{className:"text-yellow-400",size:20}),label:"Total Votes",value:r.totalVotes,color:"yellow"}];return t.jsxs("div",{className:"bg-black/20 p-6 rounded-lg border border-cyan-500/10 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-pink-500 mb-4",children:"Community Stats"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:b.map((e,m)=>t.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:m*.1},className:"p-4 bg-black/40 rounded-lg border border-cyan-500/20 relative overflow-hidden group",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-500/5 to-cyan-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.icon,t.jsx("span",{className:"text-cyan-300/60 text-sm",children:e.label})]}),t.jsx(p.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10},className:`text-2xl font-bold text-${e.color}-400`,children:e.value.toLocaleString()})]})]},e.label))})]})}export{U as CommunityStats};
